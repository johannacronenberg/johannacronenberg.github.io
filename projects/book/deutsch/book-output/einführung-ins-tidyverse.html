<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Einführung ins tidyverse | Programmieren in R: eine Einführung für PhonetikerInnen</title>
  <meta name="description" content="Eine Einführung in die Datenverarbeitung mit R mit Fokus auf das tidyverse. Diese Einführung wurde als Lehrmaterial für die Studierenden des Instituts für Phonetik und Sprachverarbeitung der LMU konzipiert." />
  <meta name="generator" content="bookdown 0.38 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Einführung ins tidyverse | Programmieren in R: eine Einführung für PhonetikerInnen" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Eine Einführung in die Datenverarbeitung mit R mit Fokus auf das tidyverse. Diese Einführung wurde als Lehrmaterial für die Studierenden des Instituts für Phonetik und Sprachverarbeitung der LMU konzipiert." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Einführung ins tidyverse | Programmieren in R: eine Einführung für PhonetikerInnen" />
  
  <meta name="twitter:description" content="Eine Einführung in die Datenverarbeitung mit R mit Fokus auf das tidyverse. Diese Einführung wurde als Lehrmaterial für die Studierenden des Instituts für Phonetik und Sprachverarbeitung der LMU konzipiert." />
  

<meta name="author" content="Johanna Cronenberg" />


<meta name="date" content="2024-03-14" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-frames.html"/>
<link rel="next" href="summary-statistics.html"/>
<script src="libs/jquery/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./index.html">Programmieren in R: eine Einführung</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Setup</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#installation-und-kursverzeichnis"><i class="fa fa-check"></i><b>1.1</b> Installation und Kursverzeichnis</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#r-projects"><i class="fa fa-check"></i><b>1.2</b> R projects</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#packages-und-r-version"><i class="fa fa-check"></i><b>1.3</b> Packages und R Version</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#sessions"><i class="fa fa-check"></i><b>1.4</b> Sessions</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#dokumentarten"><i class="fa fa-check"></i><b>1.5</b> Dokumentarten</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="index.html"><a href="index.html#r-skripte"><i class="fa fa-check"></i><b>1.5.1</b> R Skripte</a></li>
<li class="chapter" data-level="1.5.2" data-path="index.html"><a href="index.html#r-markdown"><i class="fa fa-check"></i><b>1.5.2</b> R Markdown</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#hilfe-zur-selbsthilfe"><i class="fa fa-check"></i><b>1.6</b> Hilfe zur Selbsthilfe</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="index.html"><a href="index.html#fehler-erkennen"><i class="fa fa-check"></i><b>1.6.1</b> Fehler erkennen</a></li>
<li class="chapter" data-level="1.6.2" data-path="index.html"><a href="index.html#community-nutzen"><i class="fa fa-check"></i><b>1.6.2</b> Community nutzen</a></li>
<li class="chapter" data-level="1.6.3" data-path="index.html"><a href="index.html#hilfe-zu-ggplot2"><i class="fa fa-check"></i><b>1.6.3</b> Hilfe zu <code>ggplot2</code></a></li>
<li class="chapter" data-level="1.6.4" data-path="index.html"><a href="index.html#statistik-in-r-literatur"><i class="fa fa-check"></i><b>1.6.4</b> Statistik in R: Literatur</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="erste-berechnungen-in-r.html"><a href="erste-berechnungen-in-r.html"><i class="fa fa-check"></i><b>2</b> Erste Berechnungen in R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="erste-berechnungen-in-r.html"><a href="erste-berechnungen-in-r.html#variablen-funktionen"><i class="fa fa-check"></i><b>2.1</b> Variablen &amp; Funktionen</a></li>
<li class="chapter" data-level="2.2" data-path="erste-berechnungen-in-r.html"><a href="erste-berechnungen-in-r.html#objektklassen"><i class="fa fa-check"></i><b>2.2</b> Objektklassen</a></li>
<li class="chapter" data-level="2.3" data-path="erste-berechnungen-in-r.html"><a href="erste-berechnungen-in-r.html#vektoren"><i class="fa fa-check"></i><b>2.3</b> Vektoren</a></li>
<li class="chapter" data-level="2.4" data-path="erste-berechnungen-in-r.html"><a href="erste-berechnungen-in-r.html#arithmetik-und-logische-operatoren"><i class="fa fa-check"></i><b>2.4</b> Arithmetik und logische Operatoren</a></li>
<li class="chapter" data-level="2.5" data-path="erste-berechnungen-in-r.html"><a href="erste-berechnungen-in-r.html#vektoren-manipulieren"><i class="fa fa-check"></i><b>2.5</b> Vektoren manipulieren</a></li>
<li class="chapter" data-level="2.6" data-path="erste-berechnungen-in-r.html"><a href="erste-berechnungen-in-r.html#faktoren"><i class="fa fa-check"></i><b>2.6</b> Faktoren</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-frames.html"><a href="data-frames.html"><i class="fa fa-check"></i><b>3</b> Data Frames</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-frames.html"><a href="data-frames.html#import-export"><i class="fa fa-check"></i><b>3.1</b> Import &amp; Export</a></li>
<li class="chapter" data-level="3.2" data-path="data-frames.html"><a href="data-frames.html#eigenschaften"><i class="fa fa-check"></i><b>3.2</b> Eigenschaften</a></li>
<li class="chapter" data-level="3.3" data-path="data-frames.html"><a href="data-frames.html#auf-spalten-zugreifen"><i class="fa fa-check"></i><b>3.3</b> Auf Spalten zugreifen</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="einführung-ins-tidyverse.html"><a href="einführung-ins-tidyverse.html"><i class="fa fa-check"></i><b>4</b> Einführung ins <em>tidyverse</em></a>
<ul>
<li class="chapter" data-level="4.1" data-path="einführung-ins-tidyverse.html"><a href="einführung-ins-tidyverse.html#pipes"><i class="fa fa-check"></i><b>4.1</b> Pipes</a></li>
<li class="chapter" data-level="4.2" data-path="einführung-ins-tidyverse.html"><a href="einführung-ins-tidyverse.html#daten-manipulieren-mit-dplyr"><i class="fa fa-check"></i><b>4.2</b> Daten manipulieren mit <code>dplyr</code></a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="einführung-ins-tidyverse.html"><a href="einführung-ins-tidyverse.html#filtering"><i class="fa fa-check"></i><b>4.2.1</b> Filtering</a></li>
<li class="chapter" data-level="4.2.2" data-path="einführung-ins-tidyverse.html"><a href="einführung-ins-tidyverse.html#selecting"><i class="fa fa-check"></i><b>4.2.2</b> Selecting</a></li>
<li class="chapter" data-level="4.2.3" data-path="einführung-ins-tidyverse.html"><a href="einführung-ins-tidyverse.html#mutating"><i class="fa fa-check"></i><b>4.2.3</b> Mutating</a></li>
<li class="chapter" data-level="4.2.4" data-path="einführung-ins-tidyverse.html"><a href="einführung-ins-tidyverse.html#renaming"><i class="fa fa-check"></i><b>4.2.4</b> Renaming</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="einführung-ins-tidyverse.html"><a href="einführung-ins-tidyverse.html#weitere-beispiele-für-komplexe-pipes"><i class="fa fa-check"></i><b>4.3</b> Weitere Beispiele für komplexe Pipes</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="summary-statistics.html"><a href="summary-statistics.html"><i class="fa fa-check"></i><b>5</b> Summary Statistics</a>
<ul>
<li class="chapter" data-level="5.1" data-path="summary-statistics.html"><a href="summary-statistics.html#mittelwert-median"><i class="fa fa-check"></i><b>5.1</b> Mittelwert &amp; Median</a></li>
<li class="chapter" data-level="5.2" data-path="summary-statistics.html"><a href="summary-statistics.html#varianz-standardabweichung"><i class="fa fa-check"></i><b>5.2</b> Varianz &amp; Standardabweichung</a></li>
<li class="chapter" data-level="5.3" data-path="summary-statistics.html"><a href="summary-statistics.html#quantile"><i class="fa fa-check"></i><b>5.3</b> Quantile</a></li>
<li class="chapter" data-level="5.4" data-path="summary-statistics.html"><a href="summary-statistics.html#beispiel-boxplot"><i class="fa fa-check"></i><b>5.4</b> Beispiel Boxplot</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="daten-manipulieren-mit-dplyr-fortsetzung.html"><a href="daten-manipulieren-mit-dplyr-fortsetzung.html"><i class="fa fa-check"></i><b>6</b> Daten manipulieren mit <code>dplyr</code> (Fortsetzung)</a>
<ul>
<li class="chapter" data-level="6.1" data-path="daten-manipulieren-mit-dplyr-fortsetzung.html"><a href="daten-manipulieren-mit-dplyr-fortsetzung.html#grouping-summarising"><i class="fa fa-check"></i><b>6.1</b> Grouping &amp; Summarising</a></li>
<li class="chapter" data-level="6.2" data-path="daten-manipulieren-mit-dplyr-fortsetzung.html"><a href="daten-manipulieren-mit-dplyr-fortsetzung.html#arranging"><i class="fa fa-check"></i><b>6.2</b> Arranging</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="daten-abbilden-mit-ggplot2.html"><a href="daten-abbilden-mit-ggplot2.html"><i class="fa fa-check"></i><b>7</b> Daten abbilden mit <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="7.1" data-path="daten-abbilden-mit-ggplot2.html"><a href="daten-abbilden-mit-ggplot2.html#boxplots"><i class="fa fa-check"></i><b>7.1</b> Boxplots</a></li>
<li class="chapter" data-level="7.2" data-path="daten-abbilden-mit-ggplot2.html"><a href="daten-abbilden-mit-ggplot2.html#scatter--lineplots"><i class="fa fa-check"></i><b>7.2</b> Scatter- &amp; Lineplots</a></li>
<li class="chapter" data-level="7.3" data-path="daten-abbilden-mit-ggplot2.html"><a href="daten-abbilden-mit-ggplot2.html#barplots"><i class="fa fa-check"></i><b>7.3</b> Barplots</a></li>
<li class="chapter" data-level="7.4" data-path="daten-abbilden-mit-ggplot2.html"><a href="daten-abbilden-mit-ggplot2.html#histogramme-wahrscheinlichkeitsdichte"><i class="fa fa-check"></i><b>7.4</b> Histogramme &amp; Wahrscheinlichkeitsdichte</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="daten-aufräumen-mit-tidyr.html"><a href="daten-aufräumen-mit-tidyr.html"><i class="fa fa-check"></i><b>8</b> Daten aufräumen mit <code>tidyr</code></a>
<ul>
<li class="chapter" data-level="8.1" data-path="daten-aufräumen-mit-tidyr.html"><a href="daten-aufräumen-mit-tidyr.html#tibbles"><i class="fa fa-check"></i><b>8.1</b> Tibbles</a></li>
<li class="chapter" data-level="8.2" data-path="daten-aufräumen-mit-tidyr.html"><a href="daten-aufräumen-mit-tidyr.html#pivoting"><i class="fa fa-check"></i><b>8.2</b> Pivoting</a></li>
<li class="chapter" data-level="8.3" data-path="daten-aufräumen-mit-tidyr.html"><a href="daten-aufräumen-mit-tidyr.html#separating"><i class="fa fa-check"></i><b>8.3</b> Separating</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="joining-mit-dplyr.html"><a href="joining-mit-dplyr.html"><i class="fa fa-check"></i><b>9</b> Joining mit <code>dplyr</code></a>
<ul>
<li class="chapter" data-level="9.1" data-path="joining-mit-dplyr.html"><a href="joining-mit-dplyr.html#mutating-joins"><i class="fa fa-check"></i><b>9.1</b> Mutating Joins</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="joining-mit-dplyr.html"><a href="joining-mit-dplyr.html#inner-join"><i class="fa fa-check"></i><b>9.1.1</b> Inner Join</a></li>
<li class="chapter" data-level="9.1.2" data-path="joining-mit-dplyr.html"><a href="joining-mit-dplyr.html#outer-join"><i class="fa fa-check"></i><b>9.1.2</b> Outer Join</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="joining-mit-dplyr.html"><a href="joining-mit-dplyr.html#filtering-joins"><i class="fa fa-check"></i><b>9.2</b> Filtering Joins</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="pretty-plots.html"><a href="pretty-plots.html"><i class="fa fa-check"></i><b>10</b> Pretty Plots</a>
<ul>
<li class="chapter" data-level="10.1" data-path="pretty-plots.html"><a href="pretty-plots.html#achsenbeschriftungen"><i class="fa fa-check"></i><b>10.1</b> Achsenbeschriftungen</a></li>
<li class="chapter" data-level="10.2" data-path="pretty-plots.html"><a href="pretty-plots.html#koordinatensystem-begrenzen"><i class="fa fa-check"></i><b>10.2</b> Koordinatensystem begrenzen</a></li>
<li class="chapter" data-level="10.3" data-path="pretty-plots.html"><a href="pretty-plots.html#farben"><i class="fa fa-check"></i><b>10.3</b> Farben</a></li>
<li class="chapter" data-level="10.4" data-path="pretty-plots.html"><a href="pretty-plots.html#weitere-spezifikationen"><i class="fa fa-check"></i><b>10.4</b> Weitere Spezifikationen</a></li>
<li class="chapter" data-level="10.5" data-path="pretty-plots.html"><a href="pretty-plots.html#schriftzeichengröße"><i class="fa fa-check"></i><b>10.5</b> Schriftzeichengröße</a></li>
<li class="chapter" data-level="10.6" data-path="pretty-plots.html"><a href="pretty-plots.html#plots-unterteilen-und-anordnen"><i class="fa fa-check"></i><b>10.6</b> Plots unterteilen und anordnen</a>
<ul>
<li class="chapter" data-level="10.6.1" data-path="pretty-plots.html"><a href="pretty-plots.html#plots-unterteilen"><i class="fa fa-check"></i><b>10.6.1</b> Plots unterteilen</a></li>
<li class="chapter" data-level="10.6.2" data-path="pretty-plots.html"><a href="pretty-plots.html#plots-anordnen"><i class="fa fa-check"></i><b>10.6.2</b> Plots anordnen</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
			<a class="btn pull-right js-toolbar-action" href="../../english/book-output/introduction-to-the-tidyverse.html"><i class="fa fa-language"></i></a>
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Programmieren in R: eine Einführung für PhonetikerInnen</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="einführung-ins-tidyverse" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">4</span> Einführung ins <em>tidyverse</em><a href="einführung-ins-tidyverse.html#einführung-ins-tidyverse" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Für dieses Kapitel benötigen Sie die folgenden Packages und Data Frames:</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="einführung-ins-tidyverse.html#cb167-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<pre><code>## ── Attaching core tidyverse packages ──────────────────
## ✔ dplyr     1.1.4     ✔ readr     2.1.5
## ✔ forcats   1.0.0     ✔ stringr   1.5.1
## ✔ ggplot2   3.5.0     ✔ tibble    3.2.1
## ✔ lubridate 1.9.3     ✔ tidyr     1.3.1
## ✔ purrr     1.0.2     
## ── Conflicts ───────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()
## ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="einführung-ins-tidyverse.html#cb169-1" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;magrittr&#39;
## 
## The following object is masked from &#39;package:purrr&#39;:
## 
##     set_names
## 
## The following object is masked from &#39;package:tidyr&#39;:
## 
##     extract</code></pre>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="einführung-ins-tidyverse.html#cb171-1" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;http://www.phonetik.uni-muenchen.de/~jmh/lehre/Rdf&quot;</span></span>
<span id="cb171-2"><a href="einführung-ins-tidyverse.html#cb171-2" tabindex="-1"></a>asp <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="fu">file.path</span>(url, <span class="st">&quot;asp.txt&quot;</span>))</span>
<span id="cb171-3"><a href="einführung-ins-tidyverse.html#cb171-3" tabindex="-1"></a>int <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="fu">file.path</span>(url, <span class="st">&quot;intdauer.txt&quot;</span>))</span>
<span id="cb171-4"><a href="einführung-ins-tidyverse.html#cb171-4" tabindex="-1"></a>vdata <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="fu">file.path</span>(url, <span class="st">&quot;vdata.txt&quot;</span>))</span></code></pre></div>
<p>Nutzen Sie die Methoden aus Kapitel <a href="data-frames.html#eigenschaften">3.2</a>, um sich mit den einzelnen Data Frames vertraut zu machen!</p>
<p>Das <em>tidyverse</em> ist eine Sammlung von Packages, die bei unterschiedlichen Aspekten der Datenverarbeitung helfen. Wir werden uns im Verlauf der nächsten Kapitel mit einigen dieser <em>tidyverse</em>-Packages beschäftigen. Wenn Sie das <em>tidyverse</em> laden, sehen Sie folgendes:</p>
<p><img src="img/library_tidyverse.png" /></p>
<p>Zum <em>tidyverse</em> in der Version 2.0 gehören die neun dort aufgelisteten Packages (<code>dplyr</code>, <code>forcats</code>, <code>ggplot2</code>, <code>lubridate</code>, <code>purrr</code>, <code>readr</code>, <code>stringr</code>, <code>tibble</code>, <code>tidyr</code>). All diese Pakete können Sie auch einzeln laden, wenn Sie das möchten. Zusätzlich wird angezeigt, dass es zwei Konflikte gibt: Die Notation <code>dplyr::filter()</code> bedeutet “die Funktion <code>filter()</code> aus dem Paket <code>dplyr</code>”. Diese Funktion überschreibt die Funktion <code>filter()</code> aus dem Paket <code>stats</code> (das ist ein Paket, das den NutzerInnen ohne vorheriges Laden mittels <code>library()</code> immer zur Verfügung steht). Funktionen aus verschiedenen Paketen können sich gegenseitig überschreiben, wenn sie denselben Funktionsnamen haben, wie z.B. <code>filter()</code>. Wenn man nun also <code>filter()</code> verwendet, wird die Funktion von <code>dplyr</code> verwendet, nicht die Funktion von <code>stats</code>. Wenn man explizit die Funktion von <code>stats</code> verwenden will, kann man die obige Notation verwenden, also <code>stats::filter()</code>.</p>
<p>Viele Funktionen aus dem <em>tidyverse</em> dienen dazu, traditionelle R Notationen abzulösen. Diese traditionellen Notationen sind häufig recht sperrig; <em>tidyverse</em>-Code hingegen ist leicht zu lesen und zu schreiben. Wir verwenden <em>tidyverse</em>, um Data Frames aufzuräumen, zu filtern oder zu verändern.</p>
<div id="pipes" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Pipes<a href="einführung-ins-tidyverse.html#pipes" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Dazu müssen wir zuerst lernen, wie die <em>tidyverse</em>-Syntax funktioniert:</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="einführung-ins-tidyverse.html#cb172-1" tabindex="-1"></a>asp <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>##       d             Wort Vpn Kons Bet
## 1 26.18 Fruehlingswetter k01    t  un
## 2 23.06          Gestern k01    t  un
## 3 26.81           Montag k01    t  un
## 4 14.75            Vater k01    t  un
## 5 42.38            Tisch k01    t  be
## 6 21.56           Mutter k01    t  un</code></pre>
<p>Wir beginnen den Code immer mit dem Date Frame und hängen dann einfach alle Funktionen, die wir auf den Data Frame anwenden wollen, in chronologischer Reihenfolge an den Data Frame. Zwischen jeder Funktion steht die <strong>Pipe <code>%&gt;%</code></strong>. Die Pipe nimmt immer das, was links von der Pipe steht, und reicht es weiter an die Funktion, die rechts von der Pipe steht. Im Code oben wird also die Funktion <code>head()</code> auf den Data Frame <code>asp</code> angewendet. Dies ist genau dasselbe wie:</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="einführung-ins-tidyverse.html#cb174-1" tabindex="-1"></a><span class="fu">head</span>(asp)</span></code></pre></div>
<pre><code>##       d             Wort Vpn Kons Bet
## 1 26.18 Fruehlingswetter k01    t  un
## 2 23.06          Gestern k01    t  un
## 3 26.81           Montag k01    t  un
## 4 14.75            Vater k01    t  un
## 5 42.38            Tisch k01    t  be
## 6 21.56           Mutter k01    t  un</code></pre>
<p>In der <em>tidyverse</em>-Schreibweise mit der einfachen Pipe wird der Data Frame nicht verändert; das Ergebnis des Codes wird einfach in der Konsole ausgegeben. Wenn Sie das Ergebnis einer <em>tidyverse</em>-Pipe in einer Variable abspeichern wollen, nutzen Sie die übliche Notation mit dem Zuweisungspfeil <code>&lt;-</code>:</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="einführung-ins-tidyverse.html#cb176-1" tabindex="-1"></a>numberOfRows <span class="ot">&lt;-</span> asp <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()</span>
<span id="cb176-2"><a href="einführung-ins-tidyverse.html#cb176-2" tabindex="-1"></a>numberOfRows</span></code></pre></div>
<pre><code>## [1] 2892</code></pre>
<p>Das Besondere ist, dass Sie so viele Funktionen mit der Pipe aneinanderhängen können wie Sie wollen. Die Funktionen werden immer auf das Ergebnis der vorherigen Funktion angewendet, wie wir gleich sehen werden. Innerhalb der Funktionen können wir dank der Pipe auf alle Spalten des Data Frames einfach mittels ihres Namens zugreifen.</p>
</div>
<div id="daten-manipulieren-mit-dplyr" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> Daten manipulieren mit <code>dplyr</code><a href="einführung-ins-tidyverse.html#daten-manipulieren-mit-dplyr" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Die wichtigsten Funktionen, die Sie in Ihrem Alltag mit R brauchen werden, stammen aus dem Package <a href="https://dplyr.tidyverse.org/index.html"><code>dplyr</code></a>. Wir unterteilen hier nach verschiedenen Arten von Operationen, die Sie auf Data Frames ausführen können.</p>
<div id="filtering" class="section level3 hasAnchor" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> Filtering<a href="einführung-ins-tidyverse.html#filtering" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Häufig werden wir aus Data Frames bestimmte Zeilen und/oder Spalten auswählen. Das Auswählen von Zeilen erfolgt mit der Funktion <strong><code>filter()</code></strong>. Als Argument(e) bekommt die Funktion einen oder mehrere logische Ausdrücke. Hierfür benötigen Sie die logischen Operatoren aus Kapitel <a href="erste-berechnungen-in-r.html#arithmetik-und-logische-operatoren">2.4</a>. Wenn Sie aus dem Data Frame <code>asp</code> alle Zeilen auswählen wollen, bei denen in der Spalte <code>Wort</code> “Montag” steht, nutzen Sie beispielsweise den Operator <code>==</code>:</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="einführung-ins-tidyverse.html#cb178-1" tabindex="-1"></a>asp <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Wort <span class="sc">==</span> <span class="st">&quot;Montag&quot;</span>)</span></code></pre></div>
<pre><code>##           d   Wort Vpn Kons Bet
## 3     26.81 Montag k01    t  un
## 63    17.75 Montag k01    t  un
## 123   45.12 Montag k02    t  un
## 182   40.50 Montag k03    t  un
## 241   33.00 Montag k04    t  un
## 300   32.69 Montag k04    t  un
## 359   50.82 Montag k05    t  un
## 476   27.93 Montag k06    t  un
## 537   17.25 Montag k61    t  un
## 597   21.13 Montag k62    t  un
## 656   20.75 Montag k62    t  un
## 2078 105.94 Montag k70    t  un
## 2079  17.56 Montag k70    t  un
## 2080  22.25 Montag k70    t  un
## 2155  60.25 Montag K19    t  un
## 2156  14.87 Montag K20    t  un
## 2157  17.56 Montag K20    t  un
## 2231  47.31 Montag K74    t  un
## 2232  34.94 Montag K74    t  un
## 2233  35.44 Montag K74    t  un
## 2310  22.62 Montag k61    t  un
## 2311  16.43 Montag k61    t  un
## 2312  29.31 Montag k61    t  un
## 2391  50.31 Montag k61    t  un
## 2392  33.12 Montag k61    t  un
## 2393  39.68 Montag k61    t  un
## 2403  42.88 Montag k61    t  un
## 2424  35.44 Montag k62    t  un
## 2506  11.25 Montag k62    t  un
## 2528   8.06 Montag k62    t  un
## 2604  33.94 Montag dlm    t  un
## 2624  29.87 Montag dlm    t  un
## 2704  30.32 Montag dlm    t  un
## 2725  21.93 Montag dlm    t  un
## 2800  49.12 Montag hpt    t  un
## 2821  24.87 Montag hpt    t  un</code></pre>
<p>Alle Zeilen, bei denen die Dauer <code>d</code> kleiner ist als 10 ms, erhält man mit folgendem Ausdruck:</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="einführung-ins-tidyverse.html#cb180-1" tabindex="-1"></a>asp <span class="sc">%&gt;%</span> <span class="fu">filter</span>(d <span class="sc">&lt;</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>##          d             Wort Vpn Kons Bet
## 180  9.130 Fruehlingswetter k03    t  un
## 205  8.440     verstauchter k03    t  un
## 540  6.688           Mutter k61    t  un
## 773  8.000           Butter k64    t  un
## 895  7.060 Buttergeschichte k66    t  un
## 982  9.500           Butter k66    t  un
## 999  8.300           Butter K22    t  un
## 1142 9.750            Vater K30    t  un
## 1155 8.630        Schwester K61    t  un
## 1170 5.690         maechtig K62    t  un
## 1294 9.690           Butter k07    t  un
## 1362 8.870          Freitag k08    t  un
## 1548 6.500            Vater k10    t  un
## 1564 8.750          spaeter k11    t  un
## 1565 5.250         Sonntags k11    t  un
## 2507 6.570     unterbrechen k62    t  un
## 2528 8.060           Montag k62    t  un
## 2542 9.500          Samstag k62    t  un
## 2580 8.880         samstags k62    t  un</code></pre>
<p>Sie können natürlich auch mehrere logische Ausdrücke miteinander verbinden, nämlich mittels den Operatoren für “und” <code>&amp;</code> oder für “oder” <code>|</code>. Mit dem folgenden Ausdruck werden nur Zeilen zurückgegeben, bei denen die Versuchsperson <code>Vpn</code> entweder “k01” oder “k02” oder “k03” ist und der Konsonant <code>Kons</code> ungleich “t”:</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="einführung-ins-tidyverse.html#cb182-1" tabindex="-1"></a>asp <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Vpn <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;k01&quot;</span>, <span class="st">&quot;k02&quot;</span>, <span class="st">&quot;k03&quot;</span>) <span class="sc">&amp;</span> Kons <span class="sc">!=</span> <span class="st">&quot;t&quot;</span>)</span></code></pre></div>
<pre><code>##         d          Wort Vpn Kons Bet
## 7   50.00        konnte k01    k  un
## 8   78.12        Kaffee k01    k  be
## 11  64.13 Broetchenkorb k01    k  be
## 12  48.94        keinen k01    k  be
## 13  59.00        Kuchen k01    k  be
## 16  56.00     einkaufen k01    k  be
## 19  34.37        Zucker k01    k  un
## 20  55.75 Suessigkeiten k01    k  un
## 21  55.62        kaufen k01    k  be
## 22  55.94     Konserven k01    k  un
## 23  61.81         Kasse k01    k  be
## 28  47.25    Kartoffeln k01    k  un
## 31  37.62        Kaffee k01    k  be
## 33  54.19       Koennen k01    k  un
## 35  35.49      Dickicht k01    k  un
## 40  59.44   Kuechenofen k01    k  be
## 42  64.50         kocht k01    k  be
## 48  69.19        Karten k01    k  be
## 49  58.69    Fahrkarten k01    k  be
## 53  30.82         Acker k01    k  un
## 57  95.13          kurz k01    k  be
## 58  57.38    verkuendet k01    k  be
## 59  72.00        kommen k01    k  be
## 67  37.75        konnte k01    k  un
## 68  52.69        Kaffee k01    k  be
## 71  71.43 Broetchenkorb k01    k  be
## 72  51.75        keinen k02    k  be
## 73  70.82        Kuchen k02    k  be
## 76  68.19     einkaufen k02    k  be
## 79  17.38        Zucker k02    k  un
## 80  50.25 Suessigkeiten k02    k  un
## 81  43.07        kaufen k02    k  be
## 82  35.62     Konserven k02    k  un
## 83  59.25         Kasse k02    k  be
## 88  44.94    Kartoffeln k02    k  un
## 91  34.44        Kaffee k02    k  be
## 93  35.62       Koennen k02    k  un
## 95  30.69      Dickicht k02    k  un
## 100 72.32   Kuechenofen k02    k  be
## 102 33.75         kocht k02    k  be
## 108 61.06        Karten k02    k  be
## 109 50.82    Fahrkarten k02    k  be
## 113 23.93         Acker k02    k  un
## 117 67.87          kurz k02    k  be
## 118 35.62    verkuendet k02    k  be
## 119 44.56        kommen k02    k  be
## 127 39.87        konnte k02    k  un
## 128 46.00        Kaffee k02    k  be
## 131 67.57 Broetchenkorb k02    k  be
## 132 58.25        keinen k02    k  be
## 133 58.81        Kuchen k02    k  be
## 136 54.94     einkaufen k02    k  be
## 139 30.88        Zucker k02    k  un
## 140 49.18 Suessigkeiten k02    k  un
## 141 63.44        kaufen k02    k  be
## 142 45.25     Konserven k02    k  un
## 143 50.50         Kasse k02    k  be
## 148 54.31    Kartoffeln k03    k  un
## 151 53.25        Kaffee k03    k  be
## 153 34.00       Koennen k03    k  un
## 155 47.82      Dickicht k03    k  un
## 160 50.56   Kuechenofen k03    k  be
## 162 38.38         kocht k03    k  be
## 168 62.43        Karten k03    k  be
## 169 36.94    Fahrkarten k03    k  be
## 172 46.69         Acker k03    k  un
## 176 43.38          kurz k03    k  be
## 177 54.75    verkuendet k03    k  be
## 178 53.75        kommen k03    k  be
## 186 32.56        konnte k03    k  un
## 187 41.81        Kaffee k03    k  be
## 190 56.81 Broetchenkorb k03    k  be
## 191 52.93        keinen k03    k  be
## 192 59.88        Kuchen k03    k  be
## 195 46.13     einkaufen k03    k  be
## 198 29.51        Zucker k03    k  un
## 199 43.13 Suessigkeiten k03    k  un
## 200 36.75        kaufen k03    k  be
## 201 33.82     Konserven k03    k  un
## 202 60.69         Kasse k03    k  be
## 206 32.25    Kartoffeln k03    k  un
## 209 48.00        Kaffee k03    k  be
## 211 33.19       Koennen k03    k  un
## 213 56.81      Dickicht k03    k  un
## 218 65.37   Kuechenofen k03    k  be
## 220 40.81         kocht k03    k  be</code></pre>
<p>Die Zeilen in einem Data Frame sind normalerweise durchnummeriert, d.h. die Zeilen haben einen Index. Wenn wir mittels des Index Zeilen auswählen wollen, nutzen wir <strong><code>slice()</code></strong> bzw. die verwandten Funktionen <code>slice_head()</code>, <code>slice_tail()</code>, <code>slice_min()</code> und <code>slice_max()</code>. Die Funktion <code>slice()</code> bekommt als Argument den Index der auszuwählenden Zeilen:</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="einführung-ins-tidyverse.html#cb184-1" tabindex="-1"></a>asp <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">4</span>)             <span class="co"># Zeile 4 auswählen</span></span></code></pre></div>
<pre><code>##       d  Wort Vpn Kons Bet
## 4 14.75 Vater k01    t  un</code></pre>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="einführung-ins-tidyverse.html#cb186-1" tabindex="-1"></a>asp <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)          <span class="co"># die ersten 10 Zeilen auswählen</span></span></code></pre></div>
<pre><code>##        d             Wort Vpn Kons Bet
## 1  26.18 Fruehlingswetter k01    t  un
## 2  23.06          Gestern k01    t  un
## 3  26.81           Montag k01    t  un
## 4  14.75            Vater k01    t  un
## 5  42.38            Tisch k01    t  be
## 6  21.56           Mutter k01    t  un
## 7  50.00           konnte k01    k  un
## 8  78.12           Kaffee k01    k  be
## 9  53.63           Tassen k01    t  be
## 10 45.94           Teller k01    t  be</code></pre>
<p>Die Funktionen <code>slice_head()</code> und <code>slice_tail()</code> bekommen als Argument die Anzahl der Zeilen <code>n</code>, die, angefangen bei der ersten bzw. der letzten Zeile, ausgewählt werden sollen.</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="einführung-ins-tidyverse.html#cb188-1" tabindex="-1"></a>asp <span class="sc">%&gt;%</span> <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">2</span>)   <span class="co"># die ersten zwei Zeilen auswählen</span></span></code></pre></div>
<pre><code>##       d             Wort Vpn Kons Bet
## 1 26.18 Fruehlingswetter k01    t  un
## 2 23.06          Gestern k01    t  un</code></pre>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="einführung-ins-tidyverse.html#cb190-1" tabindex="-1"></a>asp <span class="sc">%&gt;%</span> <span class="fu">slice_tail</span>(<span class="at">n =</span> <span class="dv">3</span>)   <span class="co"># die letzten drei Zeilen auswählen</span></span></code></pre></div>
<pre><code>##          d       Wort Vpn Kons Bet
## 2890 24.94 vormittags kko    t  un
## 2891 21.93   Richtung kko    t  un
## 2892 51.94   Verkehrt kko    k  be</code></pre>
<p>Die Funktionen <code>slice_min()</code> und <code>slice_max()</code> geben die <code>n</code> Zeilen zurück, die die niedrigsten bzw. höchsten Werte in einer Spalte haben. Wenn <code>n</code> nicht angegeben wird, wird automatisch <code>n = 1</code> verwendet, es wird also nur eine Zeile zurückgegeben.</p>
<div class="gray">
<p><strong>Weiterführende Infos: Defaults für Argumente</strong></p>
<p>Wenn man bestimmte Argumente in Funktionen nicht spezifiziert, werden häufig sog. <em>defaults</em> verwendet. Schauen Sie sich zum Beispiel die Hilfeseite der Funktion <code>seq()</code> an. Dort wird die Funktion mit ihren Argumenten wie folgt aufgeführt:</p>
<p><img src="img/seq.png" /></p>
<p>Die Argumente <code>from</code> und <code>to</code> haben den <em>default</em>-Wert 1. Und da dies die einzigen obligatorischen Argumente sind, können Sie die Funktion auch völlig ohne Angabe der Argumente ausführen:</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="einführung-ins-tidyverse.html#cb192-1" tabindex="-1"></a><span class="fu">seq</span>()</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<p>Auch das Argument <code>by</code> hat einen <em>default</em>-Wert, der anhand der Werte von <code>to</code>, <code>from</code> und <code>length.out</code> berechnet wird, falls der/die NutzerIn keinen anderen Wert eingibt.</p>
<p>Meist finden Sie die <em>default</em>-Werte für die Argumente einer Funktion auf der Hilfeseite unter <em>Usage</em>, manchmal stehen die <em>default</em>-Werte auch erst in der Beschreibung der Argumente darunter.</p>
</div>
<p>Im folgenden zeigen wir Beispiele für die zwei Funktionen, die sich auf die Dauer in Spalte <code>d</code> des Data Frames <code>asp</code> beziehen.</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="einführung-ins-tidyverse.html#cb194-1" tabindex="-1"></a>asp <span class="sc">%&gt;%</span> <span class="fu">slice_min</span>(d)        <span class="co"># die Zeile auswählen, wo d den niedrigsten Wert hat</span></span></code></pre></div>
<pre><code>##         d     Wort Vpn Kons Bet
## 1565 5.25 Sonntags k11    t  un</code></pre>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="einführung-ins-tidyverse.html#cb196-1" tabindex="-1"></a>asp <span class="sc">%&gt;%</span> <span class="fu">slice_min</span>(d, <span class="at">n =</span> <span class="dv">5</span>) <span class="co"># die fünf Zeilen auswählen, wo d die niedrigsten Werte hat</span></span></code></pre></div>
<pre><code>##          d         Wort Vpn Kons Bet
## 1565 5.250     Sonntags k11    t  un
## 1170 5.690     maechtig K62    t  un
## 1548 6.500        Vater k10    t  un
## 2507 6.570 unterbrechen k62    t  un
## 540  6.688       Mutter k61    t  un</code></pre>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="einführung-ins-tidyverse.html#cb198-1" tabindex="-1"></a>asp <span class="sc">%&gt;%</span> <span class="fu">slice_max</span>(d)        <span class="co"># die Zeile auswählen, wo d den höchsten Wert hat</span></span></code></pre></div>
<pre><code>##          d Wort Vpn Kons Bet
## 2063 138.8 Kiel k70    k  be</code></pre>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="einführung-ins-tidyverse.html#cb200-1" tabindex="-1"></a>asp <span class="sc">%&gt;%</span> <span class="fu">slice_max</span>(d, <span class="at">n =</span> <span class="dv">5</span>) <span class="co"># die fünf Zeilen auswählen, wo d die höchsten Werte hat</span></span></code></pre></div>
<pre><code>##          d      Wort Vpn Kons Bet
## 2063 138.8      Kiel k70    k  be
## 2843 129.7      Kiel hpt    k  be
## 1006 116.5 Ladentuer K23    t  be
## 2070 111.6     Tagen k70    t  be
## 1456 111.4     kauen k09    k  be</code></pre>
<p>Diese beiden Funktionen lassen sich sogar auf Spalten anwenden, die Schriftzeichen enthält. In diesem Fall wird alphabetisch vorgegangen.</p>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="einführung-ins-tidyverse.html#cb202-1" tabindex="-1"></a>asp <span class="sc">%&gt;%</span> <span class="fu">slice_min</span>(Wort)     <span class="co"># die Zeilen, wo Wort den &quot;niedrigsten&quot; Wert hat</span></span></code></pre></div>
<pre><code>##         d   Wort Vpn Kons Bet
## 51  47.63 Abteil k01    t  be
## 111 56.25 Abteil k02    t  be
## 171 56.81 Abteil k03    t  be
## 229 31.63 Abteil k04    t  be
## 288 67.31 Abteil k04    t  be
## 347 76.25 Abteil k05    t  be
## 406 38.07 Abteil k05    t  be
## 463 52.62 Abteil k06    t  be
## 524 46.93 Abteil k61    t  be
## 585 35.18 Abteil k61    t  be
## 644 47.00 Abteil k62    t  be
## 703 79.37 Abteil k63    t  be</code></pre>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="einführung-ins-tidyverse.html#cb204-1" tabindex="-1"></a>asp <span class="sc">%&gt;%</span> <span class="fu">slice_max</span>(Wort)     <span class="co"># die Zeilen, wo Wort den &quot;höchsten&quot; Wert hat</span></span></code></pre></div>
<pre><code>##          d          Wort Vpn Kons Bet
## 2444 80.75 zurueckkommen k62    k  be
## 2546 73.44 zurueckkommen k62    k  be
## 2641 53.30 zurueckkommen dlm    k  be
## 2743 63.12 zurueckkommen dlm    k  be
## 2838 79.63 zurueckkommen hpt    k  be</code></pre>
<p>Da es jeweils mehrere Zeilen gibt, wo <code>Wort</code> den niedrigsten (“abkaufen”) bzw. höchsten Wert (“Zwischenstop”) hat, werden all diese Zeilen zurückgegeben (trotz <code>n = 1</code>).`</p>
</div>
<div id="selecting" class="section level3 hasAnchor" number="4.2.2">
<h3><span class="header-section-number">4.2.2</span> Selecting<a href="einführung-ins-tidyverse.html#selecting" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Für das Auswählen von Spalten ist die Funktion <strong><code>select()</code></strong> da, die auf verschiedene Art und Weise benutzt werden kann. Als Argumente bekommt diese Funktion die Spaltennamen, die ausgewählt werden sollen. In den folgenden Beispielen sehen Sie außerdem zum ersten Mal, wie man mehrere Funktionen mit einfachen Pipes aneinander hängen kann, denn wir nutzen nach <code>select()</code> hier noch <code>slice(1)</code>, damit der Output der Funktionen nicht so lang ist.</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="einführung-ins-tidyverse.html#cb206-1" tabindex="-1"></a>asp <span class="sc">%&gt;%</span> <span class="fu">select</span>(Vpn) <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span>)         <span class="co"># nur die Spalte Vpn</span></span></code></pre></div>
<pre><code>##   Vpn
## 1 k01</code></pre>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="einführung-ins-tidyverse.html#cb208-1" tabindex="-1"></a>asp <span class="sc">%&gt;%</span> <span class="fu">select</span>(Vpn, Bet) <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span>)    <span class="co"># die Spalten Vpn und Bet</span></span></code></pre></div>
<pre><code>##   Vpn Bet
## 1 k01  un</code></pre>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="einführung-ins-tidyverse.html#cb210-1" tabindex="-1"></a>asp <span class="sc">%&gt;%</span> <span class="fu">select</span>(d<span class="sc">:</span>Kons) <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span>)      <span class="co"># die Spalten d bis einschl. Kons</span></span></code></pre></div>
<pre><code>##       d             Wort Vpn Kons
## 1 26.18 Fruehlingswetter k01    t</code></pre>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="einführung-ins-tidyverse.html#cb212-1" tabindex="-1"></a>asp <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">!</span>(d<span class="sc">:</span>Kons)) <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span>)   <span class="co"># alle Spalten außer die Spalten von d bis einschl. Kons</span></span></code></pre></div>
<pre><code>##   Bet
## 1  un</code></pre>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="einführung-ins-tidyverse.html#cb214-1" tabindex="-1"></a>asp <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>Wort) <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span>)       <span class="co"># alle Spalten außer Wort</span></span></code></pre></div>
<pre><code>##       d Vpn Kons Bet
## 1 26.18 k01    t  un</code></pre>
<p>Innerhalb der Funktion <code>select()</code> können die Funktionen <strong><code>starts_with()</code></strong> und <strong><code>ends_with()</code></strong> sehr praktisch sein, wenn Sie alle Spalten auswählen wollen, deren Namen mit demselben Buchstaben oder derselben Buchstabenfolge beginnen bzw. enden. Dies demonstrieren wir anhand des Data Frames <code>vdata</code>, der folgende Spalten hat:</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="einführung-ins-tidyverse.html#cb216-1" tabindex="-1"></a>vdata <span class="sc">%&gt;%</span> <span class="fu">colnames</span>()</span></code></pre></div>
<pre><code>##  [1] &quot;X&quot;     &quot;Y&quot;     &quot;F1&quot;    &quot;F2&quot;    &quot;dur&quot;   &quot;V&quot;    
##  [7] &quot;Tense&quot; &quot;Cons&quot;  &quot;Rate&quot;  &quot;Subj&quot;</code></pre>
<p><code>starts_with()</code> erlaubt es uns, die beiden Spalten <code>F1</code> und <code>F2</code> auszuwählen, weil beide mit “F” beginnen:</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="einführung-ins-tidyverse.html#cb218-1" tabindex="-1"></a>vdata <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">&quot;F&quot;</span>)) <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span>)</span></code></pre></div>
<pre><code>##    F1  F2
## 1 313 966</code></pre>
<p>Wie auch beim Filtern, können Sie mit den logischen Operatoren <code>&amp;</code> bzw. <code>|</code> die Funktionen <code>starts_with()</code> und <code>ends_with()</code> verbinden. Hier wählen wir (auf etwas umständliche Weise) die Spalte <code>F1</code> aus:</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="einführung-ins-tidyverse.html#cb220-1" tabindex="-1"></a>vdata <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">&quot;F&quot;</span>) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">ends_with</span>(<span class="st">&quot;2&quot;</span>)) <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span>)</span></code></pre></div>
<pre><code>##    F1
## 1 313</code></pre>
<p>Es wird ab und zu vorkommen, dass wir (nach einer ganzen Reihe an Funktionen) nur eine Spalte ausgegeben haben wollen, aber nicht als Spalte (bzw. um genau zu sein: als Data Frame mit nur einer Spalte), sondern einfach als Vektor. Dafür nutzen wir <strong><code>pull()</code></strong>. Im folgenden Beispiel wählen wir zuerst die ersten zehn Zeilen von <code>asp</code> aus und lassen uns davon dann die Spalte <code>Bet</code> als Vektor ausgeben:</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="einführung-ins-tidyverse.html#cb222-1" tabindex="-1"></a>asp <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(Bet)</span></code></pre></div>
<pre><code>##  [1] &quot;un&quot; &quot;un&quot; &quot;un&quot; &quot;un&quot; &quot;be&quot; &quot;un&quot; &quot;un&quot; &quot;be&quot; &quot;be&quot; &quot;be&quot;</code></pre>
<p>An der Ausgabe sehen Sie, dass es sich bei <code>Bet</code> um einen Vektor handelt.</p>
</div>
<div id="mutating" class="section level3 hasAnchor" number="4.2.3">
<h3><span class="header-section-number">4.2.3</span> Mutating<a href="einführung-ins-tidyverse.html#mutating" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Mit <em>Mutating</em> können wir Spalten an Data Frames anhängen oder verändern. Der Befehl heißt <strong><code>mutate()</code></strong> und bekommt als Argumente den gewünschten neuen Spaltennamen mit den Werten, die in der Spalte stehen sollen. Wenn mehrere Spalten angelegt werden sollen, können Sie sie innerhalb der Funktion aneinanderreihen. Folgender Code legt zum Beispiel zwei neue Spalten namens <code>F1</code> und <code>F2</code> im Data Frame <code>int</code> an:</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="einführung-ins-tidyverse.html#cb224-1" tabindex="-1"></a>int <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>##   Vpn    dB Dauer
## 1  S1 24.50   162
## 2  S2 32.54   120
## 3  S2 38.02   223
## 4  S2 28.38   131
## 5  S1 23.47    67
## 6  S2 37.82   169</code></pre>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="einführung-ins-tidyverse.html#cb226-1" tabindex="-1"></a>int <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">F1 =</span> <span class="fu">c</span>(<span class="dv">282</span>, <span class="dv">277</span>, <span class="dv">228</span>, <span class="dv">270</span>, <span class="dv">313</span>, <span class="dv">293</span>, <span class="dv">289</span>, <span class="dv">380</span>, <span class="dv">293</span>, <span class="dv">307</span>, <span class="dv">238</span>, <span class="dv">359</span>, <span class="dv">300</span>, <span class="dv">318</span>, <span class="dv">231</span>),</span>
<span id="cb226-2"><a href="einführung-ins-tidyverse.html#cb226-2" tabindex="-1"></a>               <span class="at">F2 =</span> <span class="fu">c</span>(<span class="dv">470</span>, <span class="dv">516</span>, <span class="dv">496</span>, <span class="dv">530</span>, <span class="dv">566</span>, <span class="dv">465</span>, <span class="dv">495</span>, <span class="dv">577</span>, <span class="dv">501</span>, <span class="dv">579</span>, <span class="dv">562</span>, <span class="dv">542</span>, <span class="dv">604</span>, <span class="dv">491</span>, <span class="dv">577</span>))</span></code></pre></div>
<pre><code>##    Vpn    dB Dauer  F1  F2
## 1   S1 24.50   162 282 470
## 2   S2 32.54   120 277 516
## 3   S2 38.02   223 228 496
## 4   S2 28.38   131 270 530
## 5   S1 23.47    67 313 566
## 6   S2 37.82   169 293 465
## 7   S2 30.08    81 289 495
## 8   S1 24.50   192 380 577
## 9   S1 21.37   116 293 501
## 10  S2 25.60    55 307 579
## 11  S1 40.20   252 238 562
## 12  S1 44.27   232 359 542
## 13  S1 26.60   144 300 604
## 14  S1 20.88   103 318 491
## 15  S2 26.05   212 231 577</code></pre>
<p>Diese neuen Spalten werden nicht automatisch im Data Frame abgespeichert! Es gibt zwei Möglichkeiten, um die Spalten dauerhaft an den Data Frame anzuhängen. Die erste ist wie üblich mit dem Zuweisungspfeil. Wir erstellen hier eine neue Variable <code>int_new</code>, die den erweiterten Data Frame enthält; man hätte auch den originalen Data Frame überschreiben können, indem man statt <code>int_new</code> nur <code>int</code> schreibt.</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="einführung-ins-tidyverse.html#cb228-1" tabindex="-1"></a>int_new <span class="ot">&lt;-</span> int <span class="sc">%&gt;%</span> </span>
<span id="cb228-2"><a href="einführung-ins-tidyverse.html#cb228-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">F1 =</span> <span class="fu">c</span>(<span class="dv">282</span>, <span class="dv">277</span>, <span class="dv">228</span>, <span class="dv">270</span>, <span class="dv">313</span>, <span class="dv">293</span>, <span class="dv">289</span>, <span class="dv">380</span>, <span class="dv">293</span>, <span class="dv">307</span>, <span class="dv">238</span>, <span class="dv">359</span>, <span class="dv">300</span>, <span class="dv">318</span>, <span class="dv">231</span>),</span>
<span id="cb228-3"><a href="einführung-ins-tidyverse.html#cb228-3" tabindex="-1"></a>         <span class="at">F2 =</span> <span class="fu">c</span>(<span class="dv">470</span>, <span class="dv">516</span>, <span class="dv">496</span>, <span class="dv">530</span>, <span class="dv">566</span>, <span class="dv">465</span>, <span class="dv">495</span>, <span class="dv">577</span>, <span class="dv">501</span>, <span class="dv">579</span>, <span class="dv">562</span>, <span class="dv">542</span>, <span class="dv">604</span>, <span class="dv">491</span>, <span class="dv">577</span>))</span>
<span id="cb228-4"><a href="einführung-ins-tidyverse.html#cb228-4" tabindex="-1"></a>int_new <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>##   Vpn    dB Dauer  F1  F2
## 1  S1 24.50   162 282 470
## 2  S2 32.54   120 277 516
## 3  S2 38.02   223 228 496
## 4  S2 28.38   131 270 530
## 5  S1 23.47    67 313 566
## 6  S2 37.82   169 293 465</code></pre>
<p>Die zweite Möglichkeit ist die sogenannte <strong>Doppelpipe</strong> aus dem Paket <code>magrittr</code>: <strong><code>%&lt;&gt;%</code></strong>. Die Doppelpipe kann nur als erste Pipe in einer Reihe von Pipes eingesetzt werden (auch das werden wir noch sehen). Zudem muss als erstes Argument nach der Doppelpipe nicht mehr der Data Frame stehen, denn der steht schon links von der Doppelpipe.</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="einführung-ins-tidyverse.html#cb230-1" tabindex="-1"></a>int <span class="sc">%&lt;&gt;%</span> <span class="fu">mutate</span>(<span class="at">F1 =</span> <span class="fu">c</span>(<span class="dv">282</span>, <span class="dv">277</span>, <span class="dv">228</span>, <span class="dv">270</span>, <span class="dv">313</span>, <span class="dv">293</span>, <span class="dv">289</span>, <span class="dv">380</span>, <span class="dv">293</span>, <span class="dv">307</span>, <span class="dv">238</span>, <span class="dv">359</span>, <span class="dv">300</span>, <span class="dv">318</span>, <span class="dv">231</span>),</span>
<span id="cb230-2"><a href="einführung-ins-tidyverse.html#cb230-2" tabindex="-1"></a>                <span class="at">F2 =</span> <span class="fu">c</span>(<span class="dv">470</span>, <span class="dv">516</span>, <span class="dv">496</span>, <span class="dv">530</span>, <span class="dv">566</span>, <span class="dv">465</span>, <span class="dv">495</span>, <span class="dv">577</span>, <span class="dv">501</span>, <span class="dv">579</span>, <span class="dv">562</span>, <span class="dv">542</span>, <span class="dv">604</span>, <span class="dv">491</span>, <span class="dv">577</span>))</span>
<span id="cb230-3"><a href="einführung-ins-tidyverse.html#cb230-3" tabindex="-1"></a>int <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>##   Vpn    dB Dauer  F1  F2
## 1  S1 24.50   162 282 470
## 2  S2 32.54   120 277 516
## 3  S2 38.02   223 228 496
## 4  S2 28.38   131 270 530
## 5  S1 23.47    67 313 566
## 6  S2 37.82   169 293 465</code></pre>
<p>Es gibt zwei Funktionen, die sehr hilfreich innerhalb von <code>mutate()</code> sind, wenn eine neue Spalte auf den Werten einer bereits existierenden Spalte beruhen soll. Für binäre Entscheidungen nutzen Sie <strong><code>ifelse()</code></strong>, für nicht binäre Entscheidungen nutzen Sie <strong><code>case_when()</code></strong>.</p>
<p>Nehmen wir an, Sie wollen eine weitere Spalte an den Data Frame <code>int</code> anhängen. Sie wissen, dass Versuchsperson “S1” 29 Jahre alt ist, Versuchsperson “S2” ist 33 Jahre alt. Sie wollen eine Spalte <code>age</code> anlegen, die genau das festhält. Dann benutzen Sie die Funktion <code>ifelse()</code> innerhalb von <code>mutate()</code>. <code>ifelse()</code> bekommt als Argumente zuerst einen logischen Ausdruck, dann den Wert, der eingesetzt werden soll, wenn der logische Ausdruck für eine Zeile wahr ist (<code>TRUE</code>), und zuletzt den Wert für Zeilen, für die der logische Ausdruck unwahr ist (<code>FALSE</code>). Um also die neue Spalte zu erstellen, wird für jede Zeile geprüft, ob die Versuchsperson “S1” ist; wenn ja, wird in die neue Spalte <code>age</code> der Wert 29 eingetragen, ansonsten der Wert 33.</p>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="einführung-ins-tidyverse.html#cb232-1" tabindex="-1"></a>int <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">age =</span> <span class="fu">ifelse</span>(Vpn <span class="sc">==</span> <span class="st">&quot;S1&quot;</span>, <span class="dv">29</span>, <span class="dv">33</span>))</span></code></pre></div>
<pre><code>##    Vpn    dB Dauer  F1  F2 age
## 1   S1 24.50   162 282 470  29
## 2   S2 32.54   120 277 516  33
## 3   S2 38.02   223 228 496  33
## 4   S2 28.38   131 270 530  33
## 5   S1 23.47    67 313 566  29
## 6   S2 37.82   169 293 465  33
## 7   S2 30.08    81 289 495  33
## 8   S1 24.50   192 380 577  29
## 9   S1 21.37   116 293 501  29
## 10  S2 25.60    55 307 579  33
## 11  S1 40.20   252 238 562  29
## 12  S1 44.27   232 359 542  29
## 13  S1 26.60   144 300 604  29
## 14  S1 20.88   103 318 491  29
## 15  S2 26.05   212 231 577  33</code></pre>
<p>Bei nicht binären Entscheidungen wird statt <code>ifelse()</code> die Funktion <code>case_when()</code> eingesetzt. Diese Funktion bekommt so viele logische Ausdrücke und entsprechende Werte wie gewünscht. Zum Data Frame <code>int</code> wollen Sie eine weitere Spalte namens <code>noise</code> hinzufügen. Wenn in der Spalte <code>dB</code> ein Wert unter 25 Dezibel steht, soll in der Spalte <code>noise</code> “leise” stehen, bei Dezibelwerten zwischen 25 und 35 soll “mittel” und bei Dezibelwerten über 35 soll “laut” eingetragen werden. Die Schreibweise dieser Bedingungen ist wie folgt: Zuerst kommt der logische Ausdruck, dann die Tilde <code>~</code>, und abschließend der einzutragende Wert, wenn der logische Ausdruck für eine Zeile wahr ist.</p>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="einführung-ins-tidyverse.html#cb234-1" tabindex="-1"></a>int <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">noise =</span> <span class="fu">case_when</span>(dB <span class="sc">&lt;</span> <span class="dv">25</span> <span class="sc">~</span> <span class="st">&quot;leise&quot;</span>,</span>
<span id="cb234-2"><a href="einführung-ins-tidyverse.html#cb234-2" tabindex="-1"></a>                                 dB <span class="sc">&gt;</span> <span class="dv">25</span> <span class="sc">&amp;</span> dB <span class="sc">&lt;</span> <span class="dv">35</span> <span class="sc">~</span> <span class="st">&quot;mittel&quot;</span>,</span>
<span id="cb234-3"><a href="einführung-ins-tidyverse.html#cb234-3" tabindex="-1"></a>                                 dB <span class="sc">&gt;</span> <span class="dv">35</span> <span class="sc">~</span> <span class="st">&quot;laut&quot;</span>))</span></code></pre></div>
<pre><code>##    Vpn    dB Dauer  F1  F2  noise
## 1   S1 24.50   162 282 470  leise
## 2   S2 32.54   120 277 516 mittel
## 3   S2 38.02   223 228 496   laut
## 4   S2 28.38   131 270 530 mittel
## 5   S1 23.47    67 313 566  leise
## 6   S2 37.82   169 293 465   laut
## 7   S2 30.08    81 289 495 mittel
## 8   S1 24.50   192 380 577  leise
## 9   S1 21.37   116 293 501  leise
## 10  S2 25.60    55 307 579 mittel
## 11  S1 40.20   252 238 562   laut
## 12  S1 44.27   232 359 542   laut
## 13  S1 26.60   144 300 604 mittel
## 14  S1 20.88   103 318 491  leise
## 15  S2 26.05   212 231 577 mittel</code></pre>
</div>
<div id="renaming" class="section level3 hasAnchor" number="4.2.4">
<h3><span class="header-section-number">4.2.4</span> Renaming<a href="einführung-ins-tidyverse.html#renaming" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Häufig ist es sinnvoll, Spalten umzubenennen und ihnen vernünftige Namen zu geben. (Generell ist es sinnvoll, den Spalten von Anfang an sprechende Namen zu geben, also Namen, die zweifelsfrei beschreiben, was in der Spalte zu finden ist – dies ist nicht trivial!)</p>
<p>Im Data Frame <code>asp</code> sind fast alle Spaltennamen Abkürzungen:</p>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="einführung-ins-tidyverse.html#cb236-1" tabindex="-1"></a>asp <span class="sc">%&gt;%</span> <span class="fu">colnames</span>()</span></code></pre></div>
<pre><code>## [1] &quot;d&quot;    &quot;Wort&quot; &quot;Vpn&quot;  &quot;Kons&quot; &quot;Bet&quot;</code></pre>
<p>Jetzt benennen wir die Spalten um und speichern das Ergebnis mittels der Doppelpipe direkt im Data Frame <code>asp</code> ab. Hierzu benutzen wir <strong><code>rename()</code></strong>. Als Argumente bekommt die Funktion zuerst den gewünschten Spaltennamen, dann ein <code>=</code>, und dann den alten Spaltennamen. Sie brauchen die Spaltennamen nicht in Anführungszeichen zu setzen. Wenn Sie gleich mehrere Spalten umbenennen wollen, können Sie das einfach mit Komma getrennt in der Funktion angeben.</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb238-1"><a href="einführung-ins-tidyverse.html#cb238-1" tabindex="-1"></a>asp <span class="sc">%&lt;&gt;%</span> <span class="fu">rename</span>(<span class="at">Dauer =</span> d, </span>
<span id="cb238-2"><a href="einführung-ins-tidyverse.html#cb238-2" tabindex="-1"></a>                <span class="at">Versuchsperson =</span> Vpn, </span>
<span id="cb238-3"><a href="einführung-ins-tidyverse.html#cb238-3" tabindex="-1"></a>                <span class="at">Konsonant =</span> Kons, </span>
<span id="cb238-4"><a href="einführung-ins-tidyverse.html#cb238-4" tabindex="-1"></a>                <span class="at">Betonung =</span> Bet)</span>
<span id="cb238-5"><a href="einführung-ins-tidyverse.html#cb238-5" tabindex="-1"></a>asp <span class="sc">%&gt;%</span> <span class="fu">colnames</span>()</span></code></pre></div>
<pre><code>## [1] &quot;Dauer&quot;          &quot;Wort&quot;           &quot;Versuchsperson&quot;
## [4] &quot;Konsonant&quot;      &quot;Betonung&quot;</code></pre>
</div>
</div>
<div id="weitere-beispiele-für-komplexe-pipes" class="section level2 hasAnchor" number="4.3">
<h2><span class="header-section-number">4.3</span> Weitere Beispiele für komplexe Pipes<a href="einführung-ins-tidyverse.html#weitere-beispiele-für-komplexe-pipes" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Wie Sie bereits gesehen haben, lassen sich viele Funktionen mit Pipes aneinanderhängen. Es ist dabei sehr wichtig, sich immer wieder vor Augen zu führen, dass jede Funktion auf das Ergebnis der vorherigen Funktion angewendet wird. Bei langen Pipes sollten Sie außerdem nach jeder Pipe einen Zeilenumbruch einfügen, weil dies die Lesbarkeit erhöht.</p>
<p>Die beiden folgenden Schreibweisen haben dasselbe Ergebnis und werfen auch keinen Fehler, aber sie gehen unterschiedlich vor. Im ersten Beispiel wird zuerst die Spalte <code>Versuchsperson</code> ausgewählt, dann wird die erste Zeile ausgewählt, beim zweiten Beispiel genau umgekehrt.</p>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb240-1"><a href="einführung-ins-tidyverse.html#cb240-1" tabindex="-1"></a>asp <span class="sc">%&gt;%</span> </span>
<span id="cb240-2"><a href="einführung-ins-tidyverse.html#cb240-2" tabindex="-1"></a>  <span class="fu">select</span>(Versuchsperson) <span class="sc">%&gt;%</span> </span>
<span id="cb240-3"><a href="einführung-ins-tidyverse.html#cb240-3" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span>)</span></code></pre></div>
<pre><code>##   Versuchsperson
## 1            k01</code></pre>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb242-1"><a href="einführung-ins-tidyverse.html#cb242-1" tabindex="-1"></a>asp <span class="sc">%&gt;%</span> </span>
<span id="cb242-2"><a href="einführung-ins-tidyverse.html#cb242-2" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb242-3"><a href="einführung-ins-tidyverse.html#cb242-3" tabindex="-1"></a>  <span class="fu">select</span>(Versuchsperson)</span></code></pre></div>
<pre><code>##   Versuchsperson
## 1            k01</code></pre>
<p>Das kann unter Umständen zu Fehlern führen, wenn Sie nicht genau aufpassen, in welcher Reihenfolge Sie Funktionen auf einen Data Frame anwenden. Sie möchten zum Beispiel aus dem Data Frame <code>vdata</code> die Spalte <code>X</code> auswählen, aber auch in <code>Alter</code> umbenennen. Dann wird der folgende Code einen Fehler werfen, weil sich die Funktion <code>select()</code> nicht mehr auf die Spalte <code>X</code> anwenden lässt, <em>nachdem</em> die Spalte bereits in <code>Alter</code> umbenannt wurde:</p>
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb244-1"><a href="einführung-ins-tidyverse.html#cb244-1" tabindex="-1"></a>vdata <span class="sc">%&gt;%</span> </span>
<span id="cb244-2"><a href="einführung-ins-tidyverse.html#cb244-2" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Alter =</span> X) <span class="sc">%&gt;%</span> </span>
<span id="cb244-3"><a href="einführung-ins-tidyverse.html#cb244-3" tabindex="-1"></a>  <span class="fu">select</span>(X)</span></code></pre></div>
<pre><code>## Error in `select()`:
## ! Can&#39;t subset columns that don&#39;t exist.
## ✖ Column `X` doesn&#39;t exist.</code></pre>
<p>Der Fehler hier sagt Ihnen zum Glück genau, was falsch gelaufen ist. Richtig geht es also so (wir benutzen zusätzlich <code>slice(1:10)</code>, damit der Output nicht so lang ist):</p>
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb246-1"><a href="einführung-ins-tidyverse.html#cb246-1" tabindex="-1"></a>vdata <span class="sc">%&gt;%</span> </span>
<span id="cb246-2"><a href="einführung-ins-tidyverse.html#cb246-2" tabindex="-1"></a>  <span class="fu">select</span>(X) <span class="sc">%&gt;%</span> </span>
<span id="cb246-3"><a href="einführung-ins-tidyverse.html#cb246-3" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Alter =</span> X) <span class="sc">%&gt;%</span> </span>
<span id="cb246-4"><a href="einführung-ins-tidyverse.html#cb246-4" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span></code></pre></div>
<pre><code>##    Alter
## 1  52.99
## 2  53.61
## 3  55.14
## 4  53.06
## 5  52.74
## 6  53.30
## 7  54.37
## 8  51.20
## 9  54.65
## 10 58.42</code></pre>
<p>Ein weiteres Beispiel. Sie möchten aus dem Data Frame <code>int</code> die Dauerwerte erfahren, wenn F1 unter 270 Hz liegt.</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb248-1"><a href="einführung-ins-tidyverse.html#cb248-1" tabindex="-1"></a>int <span class="sc">%&gt;%</span> </span>
<span id="cb248-2"><a href="einführung-ins-tidyverse.html#cb248-2" tabindex="-1"></a>  <span class="fu">pull</span>(Dauer) <span class="sc">%&gt;%</span> </span>
<span id="cb248-3"><a href="einführung-ins-tidyverse.html#cb248-3" tabindex="-1"></a>  <span class="fu">filter</span>(F1 <span class="sc">&lt;</span> <span class="dv">270</span>)</span></code></pre></div>
<pre><code>## Error in UseMethod(&quot;filter&quot;): no applicable method for &#39;filter&#39; applied to an object of class &quot;c(&#39;integer&#39;, &#39;numeric&#39;)&quot;</code></pre>
<p>Dieser Fehler ist schon etwas kryptischer. Rekonstruieren wir also, was schief gelaufen ist. Aus dem Data Frame <code>int</code> haben wir die Spalte <code>Dauer</code> gezogen, die auch existiert. Dafür haben wir aber <code>pull()</code> verwendet, und <code>pull()</code> gibt Spalten in Form eines Vektors aus. Wir können das nochmal überprüfen wie folgt:</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb250-1"><a href="einführung-ins-tidyverse.html#cb250-1" tabindex="-1"></a>int <span class="sc">%&gt;%</span> <span class="fu">pull</span>(Dauer)</span></code></pre></div>
<pre><code>##  [1] 162 120 223 131  67 169  81 192 116  55 252 232
## [13] 144 103 212</code></pre>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb252-1"><a href="einführung-ins-tidyverse.html#cb252-1" tabindex="-1"></a>int <span class="sc">%&gt;%</span> <span class="fu">pull</span>(Dauer) <span class="sc">%&gt;%</span> <span class="fu">class</span>()</span></code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<p>Ja, dies ist ein Vektor mit <em>integers</em>. Oben haben wir dann versucht, auf diesen numerischen Vektor eine Funktion anzuwenden, die für Data Frames gedacht ist – daher der Fehler. Die Lösung ist in diesem Fall also, <em>zuerst</em> zu filtern, und dann die Werte ausgeben zu lassen:</p>
<div class="sourceCode" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb254-1"><a href="einführung-ins-tidyverse.html#cb254-1" tabindex="-1"></a>int <span class="sc">%&gt;%</span> </span>
<span id="cb254-2"><a href="einführung-ins-tidyverse.html#cb254-2" tabindex="-1"></a>  <span class="fu">filter</span>(F1 <span class="sc">&lt;</span> <span class="dv">270</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb254-3"><a href="einführung-ins-tidyverse.html#cb254-3" tabindex="-1"></a>  <span class="fu">pull</span>(Dauer)</span></code></pre></div>
<pre><code>## [1] 223 252 212</code></pre>
<p>Dies sind die Dauerwerte für die drei Zeilen, bei denen F1 unter 270 Hz liegt.</p>
<p>Zuletzt wollen wir hier noch ein Beispiel für eine komplexe Pipe mit der Doppelpipe am Anfang zeigen. Was wir also jetzt tun, wird sofort in den Data Frame geschrieben, und nicht einfach in der Konsole ausgegeben. Wir möchten die Spalte <code>noise</code> jetzt dauerhaft im Data Frame <code>int</code> anlegen, dann alle Zeilen auswählen, wo die Versuchsperson “S1” ist und die Dauer zwischen 100 und 200 ms liegt, und zuletzt die Spalten <code>noise</code> und <code>Dauer</code> sowie die ersten fünf Zeilen auswählen.</p>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb256-1"><a href="einführung-ins-tidyverse.html#cb256-1" tabindex="-1"></a>int <span class="sc">%&lt;&gt;%</span> </span>
<span id="cb256-2"><a href="einführung-ins-tidyverse.html#cb256-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">noise =</span> <span class="fu">case_when</span>(dB <span class="sc">&lt;</span> <span class="dv">25</span> <span class="sc">~</span> <span class="st">&quot;leise&quot;</span>,</span>
<span id="cb256-3"><a href="einführung-ins-tidyverse.html#cb256-3" tabindex="-1"></a>                           dB <span class="sc">&gt;</span> <span class="dv">25</span> <span class="sc">&amp;</span> dB <span class="sc">&lt;</span> <span class="dv">35</span> <span class="sc">~</span> <span class="st">&quot;mittel&quot;</span>,</span>
<span id="cb256-4"><a href="einführung-ins-tidyverse.html#cb256-4" tabindex="-1"></a>                           dB <span class="sc">&gt;</span> <span class="dv">35</span> <span class="sc">~</span> <span class="st">&quot;laut&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb256-5"><a href="einführung-ins-tidyverse.html#cb256-5" tabindex="-1"></a>  <span class="fu">filter</span>(Vpn <span class="sc">==</span> <span class="st">&quot;S1&quot;</span> <span class="sc">&amp;</span> Dauer <span class="sc">&gt;</span> <span class="dv">100</span> <span class="sc">&amp;</span> Dauer <span class="sc">&lt;</span> <span class="dv">200</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb256-6"><a href="einführung-ins-tidyverse.html#cb256-6" tabindex="-1"></a>  <span class="fu">select</span>(Dauer, noise) <span class="sc">%&gt;%</span> </span>
<span id="cb256-7"><a href="einführung-ins-tidyverse.html#cb256-7" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">5</span>)</span>
<span id="cb256-8"><a href="einführung-ins-tidyverse.html#cb256-8" tabindex="-1"></a>int</span></code></pre></div>
<pre><code>##    Dauer  noise
## 1    162  leise
## 8    192  leise
## 9    116  leise
## 13   144 mittel
## 14   103  leise</code></pre>
<p>Der Data Frame <code>int</code> besteht jetzt nur noch aus zwei Spalten und fünf Zeilen, und diese Aktion kann auch nicht rückgängig gemacht werden. Seien Sie also vorsichtig und überlegen Sie genau, ob Sie einen Data Frame mit dem Ergebnis einer Pipe überschreiben wollen.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-frames.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="summary-statistics.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "none",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
},
"info": false
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
