<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>8 Daten aufräumen mit tidyr | Programmieren in R: eine Einführung für PhonetikerInnen</title>
  <meta name="description" content="Eine Einführung in die Datenverarbeitung mit R mit Fokus auf das tidyverse. Diese Einführung wurde als Lehrmaterial für die Studierenden des Instituts für Phonetik und Sprachverarbeitung der LMU konzipiert." />
  <meta name="generator" content="bookdown 0.38 and GitBook 2.6.7" />

  <meta property="og:title" content="8 Daten aufräumen mit tidyr | Programmieren in R: eine Einführung für PhonetikerInnen" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Eine Einführung in die Datenverarbeitung mit R mit Fokus auf das tidyverse. Diese Einführung wurde als Lehrmaterial für die Studierenden des Instituts für Phonetik und Sprachverarbeitung der LMU konzipiert." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="8 Daten aufräumen mit tidyr | Programmieren in R: eine Einführung für PhonetikerInnen" />
  
  <meta name="twitter:description" content="Eine Einführung in die Datenverarbeitung mit R mit Fokus auf das tidyverse. Diese Einführung wurde als Lehrmaterial für die Studierenden des Instituts für Phonetik und Sprachverarbeitung der LMU konzipiert." />
  

<meta name="author" content="Johanna Cronenberg" />


<meta name="date" content="2024-03-14" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="daten-abbilden-mit-ggplot2.html"/>
<link rel="next" href="joining-mit-dplyr.html"/>
<script src="libs/jquery/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./index.html">Programmieren in R: eine Einführung</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Setup</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#installation-und-kursverzeichnis"><i class="fa fa-check"></i><b>1.1</b> Installation und Kursverzeichnis</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#r-projects"><i class="fa fa-check"></i><b>1.2</b> R projects</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#packages-und-r-version"><i class="fa fa-check"></i><b>1.3</b> Packages und R Version</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#sessions"><i class="fa fa-check"></i><b>1.4</b> Sessions</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#dokumentarten"><i class="fa fa-check"></i><b>1.5</b> Dokumentarten</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="index.html"><a href="index.html#r-skripte"><i class="fa fa-check"></i><b>1.5.1</b> R Skripte</a></li>
<li class="chapter" data-level="1.5.2" data-path="index.html"><a href="index.html#r-markdown"><i class="fa fa-check"></i><b>1.5.2</b> R Markdown</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#hilfe-zur-selbsthilfe"><i class="fa fa-check"></i><b>1.6</b> Hilfe zur Selbsthilfe</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="index.html"><a href="index.html#fehler-erkennen"><i class="fa fa-check"></i><b>1.6.1</b> Fehler erkennen</a></li>
<li class="chapter" data-level="1.6.2" data-path="index.html"><a href="index.html#community-nutzen"><i class="fa fa-check"></i><b>1.6.2</b> Community nutzen</a></li>
<li class="chapter" data-level="1.6.3" data-path="index.html"><a href="index.html#hilfe-zu-ggplot2"><i class="fa fa-check"></i><b>1.6.3</b> Hilfe zu <code>ggplot2</code></a></li>
<li class="chapter" data-level="1.6.4" data-path="index.html"><a href="index.html#statistik-in-r-literatur"><i class="fa fa-check"></i><b>1.6.4</b> Statistik in R: Literatur</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="erste-berechnungen-in-r.html"><a href="erste-berechnungen-in-r.html"><i class="fa fa-check"></i><b>2</b> Erste Berechnungen in R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="erste-berechnungen-in-r.html"><a href="erste-berechnungen-in-r.html#variablen-funktionen"><i class="fa fa-check"></i><b>2.1</b> Variablen &amp; Funktionen</a></li>
<li class="chapter" data-level="2.2" data-path="erste-berechnungen-in-r.html"><a href="erste-berechnungen-in-r.html#objektklassen"><i class="fa fa-check"></i><b>2.2</b> Objektklassen</a></li>
<li class="chapter" data-level="2.3" data-path="erste-berechnungen-in-r.html"><a href="erste-berechnungen-in-r.html#vektoren"><i class="fa fa-check"></i><b>2.3</b> Vektoren</a></li>
<li class="chapter" data-level="2.4" data-path="erste-berechnungen-in-r.html"><a href="erste-berechnungen-in-r.html#arithmetik-und-logische-operatoren"><i class="fa fa-check"></i><b>2.4</b> Arithmetik und logische Operatoren</a></li>
<li class="chapter" data-level="2.5" data-path="erste-berechnungen-in-r.html"><a href="erste-berechnungen-in-r.html#vektoren-manipulieren"><i class="fa fa-check"></i><b>2.5</b> Vektoren manipulieren</a></li>
<li class="chapter" data-level="2.6" data-path="erste-berechnungen-in-r.html"><a href="erste-berechnungen-in-r.html#faktoren"><i class="fa fa-check"></i><b>2.6</b> Faktoren</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-frames.html"><a href="data-frames.html"><i class="fa fa-check"></i><b>3</b> Data Frames</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-frames.html"><a href="data-frames.html#import-export"><i class="fa fa-check"></i><b>3.1</b> Import &amp; Export</a></li>
<li class="chapter" data-level="3.2" data-path="data-frames.html"><a href="data-frames.html#eigenschaften"><i class="fa fa-check"></i><b>3.2</b> Eigenschaften</a></li>
<li class="chapter" data-level="3.3" data-path="data-frames.html"><a href="data-frames.html#auf-spalten-zugreifen"><i class="fa fa-check"></i><b>3.3</b> Auf Spalten zugreifen</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="einführung-ins-tidyverse.html"><a href="einführung-ins-tidyverse.html"><i class="fa fa-check"></i><b>4</b> Einführung ins <em>tidyverse</em></a>
<ul>
<li class="chapter" data-level="4.1" data-path="einführung-ins-tidyverse.html"><a href="einführung-ins-tidyverse.html#pipes"><i class="fa fa-check"></i><b>4.1</b> Pipes</a></li>
<li class="chapter" data-level="4.2" data-path="einführung-ins-tidyverse.html"><a href="einführung-ins-tidyverse.html#daten-manipulieren-mit-dplyr"><i class="fa fa-check"></i><b>4.2</b> Daten manipulieren mit <code>dplyr</code></a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="einführung-ins-tidyverse.html"><a href="einführung-ins-tidyverse.html#filtering"><i class="fa fa-check"></i><b>4.2.1</b> Filtering</a></li>
<li class="chapter" data-level="4.2.2" data-path="einführung-ins-tidyverse.html"><a href="einführung-ins-tidyverse.html#selecting"><i class="fa fa-check"></i><b>4.2.2</b> Selecting</a></li>
<li class="chapter" data-level="4.2.3" data-path="einführung-ins-tidyverse.html"><a href="einführung-ins-tidyverse.html#mutating"><i class="fa fa-check"></i><b>4.2.3</b> Mutating</a></li>
<li class="chapter" data-level="4.2.4" data-path="einführung-ins-tidyverse.html"><a href="einführung-ins-tidyverse.html#renaming"><i class="fa fa-check"></i><b>4.2.4</b> Renaming</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="einführung-ins-tidyverse.html"><a href="einführung-ins-tidyverse.html#weitere-beispiele-für-komplexe-pipes"><i class="fa fa-check"></i><b>4.3</b> Weitere Beispiele für komplexe Pipes</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="summary-statistics.html"><a href="summary-statistics.html"><i class="fa fa-check"></i><b>5</b> Summary Statistics</a>
<ul>
<li class="chapter" data-level="5.1" data-path="summary-statistics.html"><a href="summary-statistics.html#mittelwert-median"><i class="fa fa-check"></i><b>5.1</b> Mittelwert &amp; Median</a></li>
<li class="chapter" data-level="5.2" data-path="summary-statistics.html"><a href="summary-statistics.html#varianz-standardabweichung"><i class="fa fa-check"></i><b>5.2</b> Varianz &amp; Standardabweichung</a></li>
<li class="chapter" data-level="5.3" data-path="summary-statistics.html"><a href="summary-statistics.html#quantile"><i class="fa fa-check"></i><b>5.3</b> Quantile</a></li>
<li class="chapter" data-level="5.4" data-path="summary-statistics.html"><a href="summary-statistics.html#beispiel-boxplot"><i class="fa fa-check"></i><b>5.4</b> Beispiel Boxplot</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="daten-manipulieren-mit-dplyr-fortsetzung.html"><a href="daten-manipulieren-mit-dplyr-fortsetzung.html"><i class="fa fa-check"></i><b>6</b> Daten manipulieren mit <code>dplyr</code> (Fortsetzung)</a>
<ul>
<li class="chapter" data-level="6.1" data-path="daten-manipulieren-mit-dplyr-fortsetzung.html"><a href="daten-manipulieren-mit-dplyr-fortsetzung.html#grouping-summarising"><i class="fa fa-check"></i><b>6.1</b> Grouping &amp; Summarising</a></li>
<li class="chapter" data-level="6.2" data-path="daten-manipulieren-mit-dplyr-fortsetzung.html"><a href="daten-manipulieren-mit-dplyr-fortsetzung.html#arranging"><i class="fa fa-check"></i><b>6.2</b> Arranging</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="daten-abbilden-mit-ggplot2.html"><a href="daten-abbilden-mit-ggplot2.html"><i class="fa fa-check"></i><b>7</b> Daten abbilden mit <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="7.1" data-path="daten-abbilden-mit-ggplot2.html"><a href="daten-abbilden-mit-ggplot2.html#boxplots"><i class="fa fa-check"></i><b>7.1</b> Boxplots</a></li>
<li class="chapter" data-level="7.2" data-path="daten-abbilden-mit-ggplot2.html"><a href="daten-abbilden-mit-ggplot2.html#scatter--lineplots"><i class="fa fa-check"></i><b>7.2</b> Scatter- &amp; Lineplots</a></li>
<li class="chapter" data-level="7.3" data-path="daten-abbilden-mit-ggplot2.html"><a href="daten-abbilden-mit-ggplot2.html#barplots"><i class="fa fa-check"></i><b>7.3</b> Barplots</a></li>
<li class="chapter" data-level="7.4" data-path="daten-abbilden-mit-ggplot2.html"><a href="daten-abbilden-mit-ggplot2.html#histogramme-wahrscheinlichkeitsdichte"><i class="fa fa-check"></i><b>7.4</b> Histogramme &amp; Wahrscheinlichkeitsdichte</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="daten-aufräumen-mit-tidyr.html"><a href="daten-aufräumen-mit-tidyr.html"><i class="fa fa-check"></i><b>8</b> Daten aufräumen mit <code>tidyr</code></a>
<ul>
<li class="chapter" data-level="8.1" data-path="daten-aufräumen-mit-tidyr.html"><a href="daten-aufräumen-mit-tidyr.html#tibbles"><i class="fa fa-check"></i><b>8.1</b> Tibbles</a></li>
<li class="chapter" data-level="8.2" data-path="daten-aufräumen-mit-tidyr.html"><a href="daten-aufräumen-mit-tidyr.html#pivoting"><i class="fa fa-check"></i><b>8.2</b> Pivoting</a></li>
<li class="chapter" data-level="8.3" data-path="daten-aufräumen-mit-tidyr.html"><a href="daten-aufräumen-mit-tidyr.html#separating"><i class="fa fa-check"></i><b>8.3</b> Separating</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="joining-mit-dplyr.html"><a href="joining-mit-dplyr.html"><i class="fa fa-check"></i><b>9</b> Joining mit <code>dplyr</code></a>
<ul>
<li class="chapter" data-level="9.1" data-path="joining-mit-dplyr.html"><a href="joining-mit-dplyr.html#mutating-joins"><i class="fa fa-check"></i><b>9.1</b> Mutating Joins</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="joining-mit-dplyr.html"><a href="joining-mit-dplyr.html#inner-join"><i class="fa fa-check"></i><b>9.1.1</b> Inner Join</a></li>
<li class="chapter" data-level="9.1.2" data-path="joining-mit-dplyr.html"><a href="joining-mit-dplyr.html#outer-join"><i class="fa fa-check"></i><b>9.1.2</b> Outer Join</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="joining-mit-dplyr.html"><a href="joining-mit-dplyr.html#filtering-joins"><i class="fa fa-check"></i><b>9.2</b> Filtering Joins</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="pretty-plots.html"><a href="pretty-plots.html"><i class="fa fa-check"></i><b>10</b> Pretty Plots</a>
<ul>
<li class="chapter" data-level="10.1" data-path="pretty-plots.html"><a href="pretty-plots.html#achsenbeschriftungen"><i class="fa fa-check"></i><b>10.1</b> Achsenbeschriftungen</a></li>
<li class="chapter" data-level="10.2" data-path="pretty-plots.html"><a href="pretty-plots.html#koordinatensystem-begrenzen"><i class="fa fa-check"></i><b>10.2</b> Koordinatensystem begrenzen</a></li>
<li class="chapter" data-level="10.3" data-path="pretty-plots.html"><a href="pretty-plots.html#farben"><i class="fa fa-check"></i><b>10.3</b> Farben</a></li>
<li class="chapter" data-level="10.4" data-path="pretty-plots.html"><a href="pretty-plots.html#weitere-spezifikationen"><i class="fa fa-check"></i><b>10.4</b> Weitere Spezifikationen</a></li>
<li class="chapter" data-level="10.5" data-path="pretty-plots.html"><a href="pretty-plots.html#schriftzeichengröße"><i class="fa fa-check"></i><b>10.5</b> Schriftzeichengröße</a></li>
<li class="chapter" data-level="10.6" data-path="pretty-plots.html"><a href="pretty-plots.html#plots-unterteilen-und-anordnen"><i class="fa fa-check"></i><b>10.6</b> Plots unterteilen und anordnen</a>
<ul>
<li class="chapter" data-level="10.6.1" data-path="pretty-plots.html"><a href="pretty-plots.html#plots-unterteilen"><i class="fa fa-check"></i><b>10.6.1</b> Plots unterteilen</a></li>
<li class="chapter" data-level="10.6.2" data-path="pretty-plots.html"><a href="pretty-plots.html#plots-anordnen"><i class="fa fa-check"></i><b>10.6.2</b> Plots anordnen</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
			<a class="btn pull-right js-toolbar-action" href="../../english/book-output/tidying-data-with-tidyr.html"><i class="fa fa-language"></i></a>
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Programmieren in R: eine Einführung für PhonetikerInnen</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="daten-aufräumen-mit-tidyr" class="section level1 hasAnchor" number="8">
<h1><span class="header-section-number">8</span> Daten aufräumen mit <code>tidyr</code><a href="daten-aufräumen-mit-tidyr.html#daten-aufräumen-mit-tidyr" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Laden Sie die folgenden Packages und Data Frames:</p>
<div class="sourceCode" id="cb396"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb396-1"><a href="daten-aufräumen-mit-tidyr.html#cb396-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb396-2"><a href="daten-aufräumen-mit-tidyr.html#cb396-2" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb396-3"><a href="daten-aufräumen-mit-tidyr.html#cb396-3" tabindex="-1"></a><span class="fu">library</span>(gridExtra)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;gridExtra&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:dplyr&#39;:
## 
##     combine</code></pre>
<div class="sourceCode" id="cb399"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb399-1"><a href="daten-aufräumen-mit-tidyr.html#cb399-1" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;http://www.phonetik.uni-muenchen.de/~jmh/lehre/Rdf&quot;</span></span>
<span id="cb399-2"><a href="daten-aufräumen-mit-tidyr.html#cb399-2" tabindex="-1"></a>asp <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="fu">file.path</span>(url, <span class="st">&quot;asp.txt&quot;</span>))</span>
<span id="cb399-3"><a href="daten-aufräumen-mit-tidyr.html#cb399-3" tabindex="-1"></a>avokal <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="fu">file.path</span>(url, <span class="st">&quot;avokal.txt&quot;</span>))</span>
<span id="cb399-4"><a href="daten-aufräumen-mit-tidyr.html#cb399-4" tabindex="-1"></a>vcv <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="fu">file.path</span>(url, <span class="st">&quot;vcvC.txt&quot;</span>))</span></code></pre></div>
<p>“<em>tidy datasets are all alike but every messy dataset is messy in its own way</em>” – Hadley Wickham</p>
<p>Hadley Wickham ist der Chef-Entwickler des <em>tidyverse</em>. Die Funktionen des <em>tidyverse</em> sind nicht nur auf Datenmanipulation und -verarbeitung ausgerichtet, sondern auch auf das Aufräumen von Datensätzen.</p>
<p>Ein aufgeräumter Datensatz folgt drei Prinzipien:</p>
<ul>
<li>Jede Spalte enthält eine Variable</li>
<li>Jede Zeile enthält eine Beobachtung</li>
<li>Jede Zelle enthält einen Wert</li>
</ul>
<p>Diese Grundsätze scheinen zunächst offensichtlich, werden Ihnen aber in der täglichen Arbeit mit Daten in R immer wieder begegnen. Die drei Prinzipien sollten Sie vor allem aus zwei Gründen befolgen: Erstens ist jeder Datensatz so auf dieselbe konsistente Weise strukturiert, was Ihnen jede Analyse erleichtern wird. Zweitens sind die Funktionen in R, aber insbesondere die Funktionen des <em>tidyverse</em> auf die Arbeit mit Spalten ausgelegt. Das heißt, Sie wenden Funktionen häufig auf einzelne Spalten an. Deshalb ist es sinnvoll, wenn jede Spalte eine Variable enthält. Um dies zu verdeutlichen, zeigen wir Ihnen im Folgenden Beispiele für die zwei häufigsten Arten von <em>messy data</em>.</p>
<ul>
<li><em>Spaltennamen sind nicht Variablen, sondern Werte</em>: Die Spalten <code>schnell</code> und <code>langsam</code> im Data Frame <code>avokal</code> sind eigentlich Werte der Variable <code>Tempo</code>.</li>
</ul>
<div class="sourceCode" id="cb400"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb400-1"><a href="daten-aufräumen-mit-tidyr.html#cb400-1" tabindex="-1"></a>avokal</span></code></pre></div>
<pre><code>##    schnell langsam Vpn
## 1      430     415  S1
## 2      266     238  S2
## 3      567     390  S3
## 4      531     410  S4
## 5      707     605  S5
## 6      716     609  S6
## 7      651     632  S7
## 8      589     523  S8
## 9      469     411  S9
## 10     723     612 S10</code></pre>
<ul>
<li><em>Mehrere Variablen sind in einer Spalte gespeichert</em>: In der Spalte <code>Context</code> sind zwei Informationen abgespeichert: der linke und der rechte phonetische Kontext. Besser ist die Aufteilung in zwei Spalten, die sogar auch schon im Data Frame existieren (<code>Left</code> und <code>Right</code>).</li>
</ul>
<div class="sourceCode" id="cb402"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb402-1"><a href="daten-aufräumen-mit-tidyr.html#cb402-1" tabindex="-1"></a>vcv <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>##        RT Subject Vowel Lang Left Right Context
## 361 647.5    S209     a   AE    f     h     f.h
## 362 617.0    S209     a   AE    f    sh    f.sh
## 363 728.5    S209     a   AE    f    sh    f.sh
## 364 629.0    S209     a   AE    f    th    f.th
## 365 688.5    S209     a   AE    f    th    f.th
## 366 602.5    S209     a   AE    s     h     s.h</code></pre>
<p>Es ist nicht trivial, einen Data Frame sauber zu strukturieren. Nur ein Beispiel: Sie haben die ersten vier Formanten in Vokalen gemessen. Ist es sinnvoller, die erhobenen Daten in vier Spalten <code>F1</code>, <code>F2</code>, <code>F3</code>, <code>F4</code> festzuhalten? Oder besser in zwei Spalten <code>Hz</code> (mit den Formantwerten in Hertz) und <code>Formant</code> (mit den Werten 1, 2, 3 oder 4)?</p>
<p>Bevor wir Ihnen zeigen, wie Sie die obigen Datensätze so umformen können, dass sie den drei Prinzipien für aufgeräumte Daten folgen, möchten wir Ihnen noch die <strong>tibble</strong> vorstellen.</p>
<div id="tibbles" class="section level2 hasAnchor" number="8.1">
<h2><span class="header-section-number">8.1</span> Tibbles<a href="daten-aufräumen-mit-tidyr.html#tibbles" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Die <em>tibble</em> ist eine vereinfachte Form eines Data Frames, die im <em>tidyverse</em> häufig verwendet wird. Wir laden hier einen weiteren Data Frame und formen ihn danach mittels <code>as_tibble()</code> um:</p>
<div class="sourceCode" id="cb404"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb404-1"><a href="daten-aufräumen-mit-tidyr.html#cb404-1" tabindex="-1"></a>vdata <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="fu">file.path</span>(url, <span class="st">&quot;vdata.txt&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb404-2"><a href="daten-aufräumen-mit-tidyr.html#cb404-2" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span></code></pre></div>
<p>Wenn wir den Namen der <em>tibble</em> jetzt in die Konsole eingeben, wird nicht wie beim Data Frame üblich der gesamte Datensatz angezeigt, sondern nur die ersten zehn Zeilen. Wir sehen außerdem, aus wie vielen Zeilen und Spalten die <em>tibble</em> besteht und welcher Objektklasse die einzelnen Spalten angehören:</p>
<div class="sourceCode" id="cb405"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb405-1"><a href="daten-aufräumen-mit-tidyr.html#cb405-1" tabindex="-1"></a>vdata</span></code></pre></div>
<pre><code>## # A tibble: 2,982 × 10
##        X     Y    F1    F2   dur V     Tense Cons 
##    &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
##  1  53.0  4.36   313   966 107.  %     -     P    
##  2  53.6  3.65   322  2058  86.0 I     -     T    
##  3  55.1 10.4    336  1186 123.  Y     -     K    
##  4  53.1  4.75   693  2149 119.  E     -     T    
##  5  52.7  6.46   269  2008 196.  Y     +     K    
##  6  53.3  4.7    347   931  77.5 Y     -     P    
##  7  54.4  3.6    705  1119 224.  A     +     P    
##  8  51.2  7.38   248  2377 145.  I     +     P    
##  9  54.6  2.4    385  1935 103   Y     -     T    
## 10  58.4  9.17   288   595 244.  O     +     T    
## # ℹ 2,972 more rows
## # ℹ 2 more variables: Rate &lt;chr&gt;, Subj &lt;chr&gt;</code></pre>
<p>Die <em>tibble</em> hat vorrangig die Klasse <code>tbl_df</code>, aber zusätzlich noch <code>tbl</code> und <code>data.frame</code>. Wir werden deshalb im Folgenden trotzdem noch von Data Frames sprechen, wenn wir genau genommen eine <em>tibble</em> meinen.</p>
<div class="sourceCode" id="cb407"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb407-1"><a href="daten-aufräumen-mit-tidyr.html#cb407-1" tabindex="-1"></a>vdata <span class="sc">%&gt;%</span> <span class="fu">class</span>()</span></code></pre></div>
<pre><code>## [1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</code></pre>
<p>Natürlich können Sie eine <em>tibble</em> auch selbst erstellen, indem Sie die Funktion <code>tibble()</code> anstelle der Funktion <code>data.frame()</code> verwenden, zum Beispiel so:</p>
<div class="sourceCode" id="cb409"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb409-1"><a href="daten-aufräumen-mit-tidyr.html#cb409-1" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">y =</span> <span class="dv">6</span><span class="sc">:</span><span class="dv">10</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 2
##       x     y
##   &lt;int&gt; &lt;int&gt;
## 1     1     6
## 2     2     7
## 3     3     8
## 4     4     9
## 5     5    10</code></pre>
<p>Wenn Sie die Import-Funktion <code>read_delim()</code> aus dem <em>tidyverse</em>-Package <code>readr</code> anstelle der <code>read.table()</code> Funktion verwenden, wird der Datensatz automatisch als <em>tibble</em> geladen:</p>
<div class="sourceCode" id="cb411"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb411-1"><a href="daten-aufräumen-mit-tidyr.html#cb411-1" tabindex="-1"></a>int <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="fu">file.path</span>(url, <span class="st">&quot;intdauer.txt&quot;</span>), </span>
<span id="cb411-2"><a href="daten-aufräumen-mit-tidyr.html#cb411-2" tabindex="-1"></a>                  <span class="at">delim =</span> <span class="st">&quot; &quot;</span>, </span>
<span id="cb411-3"><a href="daten-aufräumen-mit-tidyr.html#cb411-3" tabindex="-1"></a>                  <span class="at">col_names =</span> <span class="fu">c</span>(<span class="st">&quot;idx&quot;</span>, <span class="st">&quot;Vpn&quot;</span>, <span class="st">&quot;dB&quot;</span>, <span class="st">&quot;Dauer&quot;</span>), </span>
<span id="cb411-4"><a href="daten-aufräumen-mit-tidyr.html#cb411-4" tabindex="-1"></a>                  <span class="at">skip =</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## Rows: 15 Columns: 4
## ── Column specification ───────────────────────────────
## Delimiter: &quot; &quot;
## chr (1): Vpn
## dbl (3): idx, dB, Dauer
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<div class="sourceCode" id="cb413"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb413-1"><a href="daten-aufräumen-mit-tidyr.html#cb413-1" tabindex="-1"></a>int</span></code></pre></div>
<pre><code>## # A tibble: 15 × 4
##      idx Vpn      dB Dauer
##    &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1     1 S1     24.5   162
##  2     2 S2     32.5   120
##  3     3 S2     38.0   223
##  4     4 S2     28.4   131
##  5     5 S1     23.5    67
##  6     6 S2     37.8   169
##  7     7 S2     30.1    81
##  8     8 S1     24.5   192
##  9     9 S1     21.4   116
## 10    10 S2     25.6    55
## 11    11 S1     40.2   252
## 12    12 S1     44.3   232
## 13    13 S1     26.6   144
## 14    14 S1     20.9   103
## 15    15 S2     26.0   212</code></pre>
<p><code>read_delim()</code> gibt Ihnen auch die Objektklasse für jede Spalte in der <em>Column specification</em> aus. Die Import-Funktionen aus <code>readr</code> sind etwas empfindlicher als die Standard-Funktionen in R. Hier mussten wir zum Beispiel einige Argumente spezifieren (<code>delim</code>, <code>col_names</code> und <code>skip</code>), um damit umzugehen, dass der Data Frame Zeilenindizes enthält. Die Standard-Funktion <code>read.table()</code> kommt hingegen meist damit klar, dass man nur den Pfad zum Datensatz angibt.</p>
<div class="gray">
<p><strong>Weiterführende Infos: Tibbles und <code>readr</code></strong></p>
<p>Wenn Sie mehr über die <em>tibble</em> erfahren möchten, empfehlen wir <a href="https://r4ds.had.co.nz/tibbles.html">Kapitel 10 aus <em>R for Data Science</em></a>.</p>
<p>Das Paket <code>readr</code> stellt noch weitere Funktionen zum Laden und Abspeichern von Datensätzen bereit, je nachdem wie die Spalten getrennt werden:</p>
<ul>
<li><code>read_csv()</code>: <strong>c</strong>omma <strong>s</strong>eparated <strong>v</strong>alues, d.h. durch Komma getrennte Spalten</li>
<li><code>read_csv2()</code>: durch Semikolon getrennte Spalten</li>
<li><code>read_tsv()</code>: durch Tab getrennte Spalten</li>
<li><code>read_delim()</code>: für alle Trennzeichen geeignet</li>
</ul>
<p>All dies und mehr finden Sie auch in <a href="https://r4ds.had.co.nz/data-import.html">Kapitel 11 aus <em>R for Data Science</em></a>.</p>
</div>
</div>
<div id="pivoting" class="section level2 hasAnchor" number="8.2">
<h2><span class="header-section-number">8.2</span> Pivoting<a href="daten-aufräumen-mit-tidyr.html#pivoting" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><img src="img/ross-pivot-friends.gif" /></p>
<p>Wenn wir unsere Daten geladen haben, fangen wir mit dem Aufräumen an. Das Ziel ist entweder, dass die Daten so strukturiert sind, dass jede Zeile eine neue Beobachtung enthält und dass die Spalten jeweils eine Variable enthalten. Das Ziel kann auch sein, dass die Daten so strukturiert sind, dass sie unserem Zweck dienen (z.B. dem Erstellen einer Abbildung). <code>tidyr</code> nennt diesen Prozess <strong>pivoting</strong> und es gibt eine gut erklärte Vignette zu dem Thema:</p>
<div class="sourceCode" id="cb415"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb415-1"><a href="daten-aufräumen-mit-tidyr.html#cb415-1" tabindex="-1"></a><span class="fu">vignette</span>(<span class="st">&quot;pivot&quot;</span>)</span></code></pre></div>
<p>Oben haben wir den Data Frame <code>avokal</code> geladen und haben festgestellt, dass die Spalten <code>schnell</code> und <code>langsam</code> eigentlich zwei Ausprägungen der Variable <code>Tempo</code> sind. Das heißt, es wäre besser, eine Spalte namens <code>Tempo</code> (Werte: “schnell”, “langsam”) und eine namens <code>Dauer</code> (Werte aus <code>schnell</code> und <code>langsam</code> in Millisekunden) zu haben:</p>
<div class="sourceCode" id="cb416"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb416-1"><a href="daten-aufräumen-mit-tidyr.html#cb416-1" tabindex="-1"></a>avokal <span class="sc">%&gt;%</span> </span>
<span id="cb416-2"><a href="daten-aufräumen-mit-tidyr.html#cb416-2" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(schnell, langsam), </span>
<span id="cb416-3"><a href="daten-aufräumen-mit-tidyr.html#cb416-3" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">&quot;Tempo&quot;</span>, </span>
<span id="cb416-4"><a href="daten-aufräumen-mit-tidyr.html#cb416-4" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&quot;Dauer&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 20 × 3
##    Vpn   Tempo   Dauer
##    &lt;chr&gt; &lt;chr&gt;   &lt;int&gt;
##  1 S1    schnell   430
##  2 S1    langsam   415
##  3 S2    schnell   266
##  4 S2    langsam   238
##  5 S3    schnell   567
##  6 S3    langsam   390
##  7 S4    schnell   531
##  8 S4    langsam   410
##  9 S5    schnell   707
## 10 S5    langsam   605
## 11 S6    schnell   716
## 12 S6    langsam   609
## 13 S7    schnell   651
## 14 S7    langsam   632
## 15 S8    schnell   589
## 16 S8    langsam   523
## 17 S9    schnell   469
## 18 S9    langsam   411
## 19 S10   schnell   723
## 20 S10   langsam   612</code></pre>
<p>Der Befehl <strong><code>pivot_longer()</code></strong> wandelt den Data Frame in das so genannte “lange Format” um. Am wichtigsten sind die folgenden drei Argumente:</p>
<ul>
<li><code>cols</code>: alle Spalten, die umwandelt werden sollen</li>
<li><code>values_to</code>: der Name der neuen Spalte mit den Werten</li>
<li><code>names_to</code>: der Name der neuen Spalte mit den ehemaligen Spaltennamen</li>
</ul>
<p>Die Pivoting-Funktionen von <code>tidyr</code> sind sehr mächtig und können auch deutlich kompliziertere Operationen durchführen. Nehmen wir den <a href="https://tidyr.tidyverse.org/reference/billboard.html">Data Frame <code>billboard</code></a>, der automatisch mit dem <code>tidyverse</code> geladen wird und die Rankings der Billboard Charts aus dem Jahr 2000 enthält:</p>
<div class="sourceCode" id="cb418"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb418-1"><a href="daten-aufräumen-mit-tidyr.html#cb418-1" tabindex="-1"></a>billboard</span></code></pre></div>
<pre><code>## # A tibble: 317 × 79
##    artist    track date.entered   wk1   wk2   wk3   wk4
##    &lt;chr&gt;     &lt;chr&gt; &lt;date&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 2 Pac     Baby… 2000-02-26      87    82    72    77
##  2 2Ge+her   The … 2000-09-02      91    87    92    NA
##  3 3 Doors … Kryp… 2000-04-08      81    70    68    67
##  4 3 Doors … Loser 2000-10-21      76    76    72    69
##  5 504 Boyz  Wobb… 2000-04-15      57    34    25    17
##  6 98^0      Give… 2000-08-19      51    39    34    26
##  7 A*Teens   Danc… 2000-07-08      97    97    96    95
##  8 Aaliyah   I Do… 2000-01-29      84    62    51    41
##  9 Aaliyah   Try … 2000-03-18      59    53    38    28
## 10 Adams, Y… Open… 2000-08-26      76    76    74    69
## # ℹ 307 more rows
## # ℹ 72 more variables: wk5 &lt;dbl&gt;, wk6 &lt;dbl&gt;,
## #   wk7 &lt;dbl&gt;, wk8 &lt;dbl&gt;, wk9 &lt;dbl&gt;, wk10 &lt;dbl&gt;,
## #   wk11 &lt;dbl&gt;, wk12 &lt;dbl&gt;, wk13 &lt;dbl&gt;, wk14 &lt;dbl&gt;,
## #   wk15 &lt;dbl&gt;, wk16 &lt;dbl&gt;, wk17 &lt;dbl&gt;, wk18 &lt;dbl&gt;,
## #   wk19 &lt;dbl&gt;, wk20 &lt;dbl&gt;, wk21 &lt;dbl&gt;, wk22 &lt;dbl&gt;,
## #   wk23 &lt;dbl&gt;, wk24 &lt;dbl&gt;, wk25 &lt;dbl&gt;, wk26 &lt;dbl&gt;, …</code></pre>
<p>Auch hier ist es der Fall, dass die Spalten <code>wk1</code>, <code>wk2</code>, <code>wk3</code> usw. eigentlich Levels oder Ausprägungen der Variable <code>week</code> sind. Wir möchten also eine Spalte erstellen, die uns die Woche angibt, und eine Spalte, die den Rank in den Billboard Charts enthält. Um dies zu erreichen, nehmen wir alle Spalten, die mit “wk” beginnen, packen die Spaltennamen in eine neue Spalte namens <code>week</code> und die Werte aus den Spalten in die neue Spalte <code>rank</code>. Das Präfix “wk” aus den alten Spaltennamen können wir durch das Argument <code>names_prefix</code> ablegen. Und zuletzt löschen wir alle NA-Werte (NA steht für <em>not available</em>) – es gibt z.B. keine Zeile für Woche 8 für 2Pac’s “Baby Don’t Cry”, weil der Song in der achten Kalenderwoche nicht in den Top 100 gerankt wurde.</p>
<div class="sourceCode" id="cb420"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb420-1"><a href="daten-aufräumen-mit-tidyr.html#cb420-1" tabindex="-1"></a>billboard <span class="sc">%&gt;%</span> </span>
<span id="cb420-2"><a href="daten-aufräumen-mit-tidyr.html#cb420-2" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">&quot;wk&quot;</span>), </span>
<span id="cb420-3"><a href="daten-aufräumen-mit-tidyr.html#cb420-3" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">&quot;week&quot;</span>, </span>
<span id="cb420-4"><a href="daten-aufräumen-mit-tidyr.html#cb420-4" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&quot;rank&quot;</span>,</span>
<span id="cb420-5"><a href="daten-aufräumen-mit-tidyr.html#cb420-5" tabindex="-1"></a>               <span class="at">names_prefix =</span> <span class="st">&quot;wk&quot;</span>,</span>
<span id="cb420-6"><a href="daten-aufräumen-mit-tidyr.html#cb420-6" tabindex="-1"></a>               <span class="at">values_drop_na =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5,307 × 5
##    artist  track               date.entered week   rank
##    &lt;chr&gt;   &lt;chr&gt;               &lt;date&gt;       &lt;chr&gt; &lt;dbl&gt;
##  1 2 Pac   Baby Don&#39;t Cry (Ke… 2000-02-26   1        87
##  2 2 Pac   Baby Don&#39;t Cry (Ke… 2000-02-26   2        82
##  3 2 Pac   Baby Don&#39;t Cry (Ke… 2000-02-26   3        72
##  4 2 Pac   Baby Don&#39;t Cry (Ke… 2000-02-26   4        77
##  5 2 Pac   Baby Don&#39;t Cry (Ke… 2000-02-26   5        87
##  6 2 Pac   Baby Don&#39;t Cry (Ke… 2000-02-26   6        94
##  7 2 Pac   Baby Don&#39;t Cry (Ke… 2000-02-26   7        99
##  8 2Ge+her The Hardest Part O… 2000-09-02   1        91
##  9 2Ge+her The Hardest Part O… 2000-09-02   2        87
## 10 2Ge+her The Hardest Part O… 2000-09-02   3        92
## # ℹ 5,297 more rows</code></pre>
<p>Es gibt noch ein Gegenstück zu <code>pivot_longer()</code>, nämlich <strong><code>pivot_wider()</code></strong>. Diese Funktion wird deutlich seltener gebraucht, und bekommt vor allem die Argumente:</p>
<ul>
<li><code>names_from</code>: die Spalte, deren einzigartige Werte als neue Spalten benutzt werden sollen</li>
<li><code>values_from</code>: die Spalte, deren Werte die neuen Spalten füllen sollen</li>
</ul>
<p>Ein Beispiel dafür kann aus dem <a href="https://tidyr.tidyverse.org/reference/us_rent_income.html">Data Frame <code>us_rent_income</code></a> abgeleitet werden, der ebenfalls mit dem <em>tidyverse</em> geladen wird:</p>
<div class="sourceCode" id="cb422"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb422-1"><a href="daten-aufräumen-mit-tidyr.html#cb422-1" tabindex="-1"></a>us_rent_income</span></code></pre></div>
<pre><code>## # A tibble: 104 × 5
##    GEOID NAME       variable estimate   moe
##    &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt;
##  1 01    Alabama    income      24476   136
##  2 01    Alabama    rent          747     3
##  3 02    Alaska     income      32940   508
##  4 02    Alaska     rent         1200    13
##  5 04    Arizona    income      27517   148
##  6 04    Arizona    rent          972     4
##  7 05    Arkansas   income      23789   165
##  8 05    Arkansas   rent          709     5
##  9 06    California income      29454   109
## 10 06    California rent         1358     3
## # ℹ 94 more rows</code></pre>
<p>Wir möchten eine Spalte <code>income</code> und eine Spalte <code>rent</code> aus den Levels der Spalte <code>variable</code> erstellen und die neuen Spalten dann mit den Werten aus <code>estimate</code> füllen.</p>
<div class="sourceCode" id="cb424"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb424-1"><a href="daten-aufräumen-mit-tidyr.html#cb424-1" tabindex="-1"></a>us_rent_income <span class="sc">%&gt;%</span> </span>
<span id="cb424-2"><a href="daten-aufräumen-mit-tidyr.html#cb424-2" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> variable,</span>
<span id="cb424-3"><a href="daten-aufräumen-mit-tidyr.html#cb424-3" tabindex="-1"></a>              <span class="at">values_from =</span> estimate)</span></code></pre></div>
<pre><code>## # A tibble: 104 × 5
##    GEOID NAME         moe income  rent
##    &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;
##  1 01    Alabama      136  24476    NA
##  2 01    Alabama        3     NA   747
##  3 02    Alaska       508  32940    NA
##  4 02    Alaska        13     NA  1200
##  5 04    Arizona      148  27517    NA
##  6 04    Arizona        4     NA   972
##  7 05    Arkansas     165  23789    NA
##  8 05    Arkansas       5     NA   709
##  9 06    California   109  29454    NA
## 10 06    California     3     NA  1358
## # ℹ 94 more rows</code></pre>
<p>Im Ergebnis sehen wir jetzt aber einige <code>NA</code>-Werte. Diese können wir zum Beispiel durch Nullen ersetzen, indem wir zusätzlich das Argument <code>values_fill</code> verwenden.</p>
<div class="sourceCode" id="cb426"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb426-1"><a href="daten-aufräumen-mit-tidyr.html#cb426-1" tabindex="-1"></a>us_rent_income <span class="sc">%&gt;%</span> </span>
<span id="cb426-2"><a href="daten-aufräumen-mit-tidyr.html#cb426-2" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> variable,</span>
<span id="cb426-3"><a href="daten-aufräumen-mit-tidyr.html#cb426-3" tabindex="-1"></a>              <span class="at">values_from =</span> estimate,</span>
<span id="cb426-4"><a href="daten-aufräumen-mit-tidyr.html#cb426-4" tabindex="-1"></a>              <span class="at">values_fill =</span> <span class="dv">0</span>)</span></code></pre></div>
<pre><code>## # A tibble: 104 × 5
##    GEOID NAME         moe income  rent
##    &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;
##  1 01    Alabama      136  24476     0
##  2 01    Alabama        3      0   747
##  3 02    Alaska       508  32940     0
##  4 02    Alaska        13      0  1200
##  5 04    Arizona      148  27517     0
##  6 04    Arizona        4      0   972
##  7 05    Arkansas     165  23789     0
##  8 05    Arkansas       5      0   709
##  9 06    California   109  29454     0
## 10 06    California     3      0  1358
## # ℹ 94 more rows</code></pre>
<p>Auch hier gibt es wieder komplexere Operationen, die <code>pivot_wider()</code> durchführen kann. Die beiden Hauptargumente <code>names_from</code> und <code>values_from</code> können jeweils auch mehr als eine Spalte angegeben bekommen. <code>pivot_wider()</code> erstellt dann so viele neue Spalten, wie es Kombinationen zwischen den Levels aus den originalen Spalten bzw. Spaltennamen gibt. Hier geben wir zum Beispiel die Spalten <code>estimate</code> und <code>moe</code> bei <code>values_from</code> an und erhalten so in Kombination mit den zwei Levels aus <code>variable</code> vier neue Spalten:</p>
<div class="sourceCode" id="cb428"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb428-1"><a href="daten-aufräumen-mit-tidyr.html#cb428-1" tabindex="-1"></a>us_rent_income <span class="sc">%&gt;%</span> </span>
<span id="cb428-2"><a href="daten-aufräumen-mit-tidyr.html#cb428-2" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> variable,</span>
<span id="cb428-3"><a href="daten-aufräumen-mit-tidyr.html#cb428-3" tabindex="-1"></a>              <span class="at">values_from =</span> <span class="fu">c</span>(estimate, moe))</span></code></pre></div>
<pre><code>## # A tibble: 52 × 6
##    GEOID NAME  estimate_income estimate_rent moe_income
##    &lt;chr&gt; &lt;chr&gt;           &lt;dbl&gt;         &lt;dbl&gt;      &lt;dbl&gt;
##  1 01    Alab…           24476           747        136
##  2 02    Alas…           32940          1200        508
##  3 04    Ariz…           27517           972        148
##  4 05    Arka…           23789           709        165
##  5 06    Cali…           29454          1358        109
##  6 08    Colo…           32401          1125        109
##  7 09    Conn…           35326          1123        195
##  8 10    Dela…           31560          1076        247
##  9 11    Dist…           43198          1424        681
## 10 12    Flor…           25952          1077         70
## # ℹ 42 more rows
## # ℹ 1 more variable: moe_rent &lt;dbl&gt;</code></pre>
<p>Zuletzt noch ein phonetisches Beispiel: Wir möchten aus den Levels der Spalte <code>Bet</code> (Betonung) des Data Frames <code>asp</code> neue Spalten machen und diese mit den Dauerwerten <code>d</code> füllen. Der Code wirft aber eine Warnmeldung, weil es mehrere Werte pro Zelle gibt in den neuen Spalten gibt, wie Sie an der seltsamen Schreibweise sehen können:</p>
<div class="sourceCode" id="cb430"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb430-1"><a href="daten-aufräumen-mit-tidyr.html#cb430-1" tabindex="-1"></a>asp <span class="sc">%&gt;%</span></span>
<span id="cb430-2"><a href="daten-aufräumen-mit-tidyr.html#cb430-2" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Bet,</span>
<span id="cb430-3"><a href="daten-aufräumen-mit-tidyr.html#cb430-3" tabindex="-1"></a>              <span class="at">values_from =</span> d)</span></code></pre></div>
<pre><code>## Warning: Values from `d` are not uniquely identified; output
## will contain list-cols.
## • Use `values_fn = list` to suppress this warning.
## • Use `values_fn = {summary_fun}` to summarise
##   duplicates.
## • Use the following dplyr code to identify duplicates.
##   {data} |&gt;
##   dplyr::summarise(n = dplyr::n(), .by = c(Wort, Vpn,
##   Kons, Bet)) |&gt;
##   dplyr::filter(n &gt; 1L)</code></pre>
<pre><code>## # A tibble: 1,723 × 5
##    Wort             Vpn   Kons  un        be       
##    &lt;chr&gt;            &lt;chr&gt; &lt;chr&gt; &lt;list&gt;    &lt;list&gt;   
##  1 Fruehlingswetter k01   t     &lt;dbl [2]&gt; &lt;NULL&gt;   
##  2 Gestern          k01   t     &lt;dbl [2]&gt; &lt;NULL&gt;   
##  3 Montag           k01   t     &lt;dbl [2]&gt; &lt;NULL&gt;   
##  4 Vater            k01   t     &lt;dbl [4]&gt; &lt;NULL&gt;   
##  5 Tisch            k01   t     &lt;NULL&gt;    &lt;dbl [3]&gt;
##  6 Mutter           k01   t     &lt;dbl [2]&gt; &lt;NULL&gt;   
##  7 konnte           k01   k     &lt;dbl [2]&gt; &lt;NULL&gt;   
##  8 Kaffee           k01   k     &lt;NULL&gt;    &lt;dbl [3]&gt;
##  9 Tassen           k01   t     &lt;NULL&gt;    &lt;dbl [2]&gt;
## 10 Teller           k01   t     &lt;NULL&gt;    &lt;dbl [2]&gt;
## # ℹ 1,713 more rows</code></pre>
<p>Netterweise gibt uns die Warnmeldung auch sofort drei Lösungswege an: Wir können das Argument <code>values_fn</code> benutzen, um die Warnung zu unterdrücken, uns anzeigen zu lassen wie viele Werte pro Zelle es gibt, oder mit einer zusammenfassenden Funktion die Werte umformen. Letzteres scheint hier sinnvoll zu sein: Dort, wo es mehrere Werte pro Zelle gibt, lassen wir mit <code>mean()</code> den Durchschnitt berechnen:</p>
<div class="sourceCode" id="cb433"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb433-1"><a href="daten-aufräumen-mit-tidyr.html#cb433-1" tabindex="-1"></a>asp <span class="sc">%&gt;%</span></span>
<span id="cb433-2"><a href="daten-aufräumen-mit-tidyr.html#cb433-2" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Bet,</span>
<span id="cb433-3"><a href="daten-aufräumen-mit-tidyr.html#cb433-3" tabindex="-1"></a>              <span class="at">values_from =</span> d,</span>
<span id="cb433-4"><a href="daten-aufräumen-mit-tidyr.html#cb433-4" tabindex="-1"></a>              <span class="at">values_fn =</span> mean)</span></code></pre></div>
<pre><code>## # A tibble: 1,723 × 5
##    Wort             Vpn   Kons     un    be
##    &lt;chr&gt;            &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 Fruehlingswetter k01   t      19.1  NA  
##  2 Gestern          k01   t      22.4  NA  
##  3 Montag           k01   t      22.3  NA  
##  4 Vater            k01   t      25.4  NA  
##  5 Tisch            k01   t      NA    55.8
##  6 Mutter           k01   t      19.3  NA  
##  7 konnte           k01   k      43.9  NA  
##  8 Kaffee           k01   k      NA    56.1
##  9 Tassen           k01   t      NA    49.4
## 10 Teller           k01   t      NA    59.4
## # ℹ 1,713 more rows</code></pre>
<p>In keinem unserer <em>pivoting</em>-Beispiele haben wir die Data Frames in ihrer veränderten Form überschrieben (z.B. mittels der Doppelpipe). Die Funktionen <code>pivot_longer()</code> und <code>pivot_wider()</code> kann man auch für temporäre Änderungen benutzen, z.B. wenn man den Data Frame in einer bestimmten Form nur für eine Abbildung braucht:</p>
<div class="sourceCode" id="cb435"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb435-1"><a href="daten-aufräumen-mit-tidyr.html#cb435-1" tabindex="-1"></a>avokal <span class="sc">%&gt;%</span> </span>
<span id="cb435-2"><a href="daten-aufräumen-mit-tidyr.html#cb435-2" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(schnell, langsam), <span class="at">names_to =</span> <span class="st">&quot;Tempo&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;Dauer&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb435-3"><a href="daten-aufräumen-mit-tidyr.html#cb435-3" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb435-4"><a href="daten-aufräumen-mit-tidyr.html#cb435-4" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> Tempo, <span class="at">y =</span> Dauer) <span class="sc">+</span> </span>
<span id="cb435-5"><a href="daten-aufräumen-mit-tidyr.html#cb435-5" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code></pre></div>
<p><img src="programmieren_statistik_r_files/figure-html/unnamed-chunk-143-1.svg" width="672" /></p>
</div>
<div id="separating" class="section level2 hasAnchor" number="8.3">
<h2><span class="header-section-number">8.3</span> Separating<a href="daten-aufräumen-mit-tidyr.html#separating" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Unser zweites Beispiel für <em>messy data</em> ist der Data Frame <code>vcv</code>, bei dem zwei Informationen in der Spalte <code>Context</code> vorhanden sind:</p>
<div class="sourceCode" id="cb436"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb436-1"><a href="daten-aufräumen-mit-tidyr.html#cb436-1" tabindex="-1"></a>vcv <span class="sc">%&gt;%</span> head</span></code></pre></div>
<pre><code>##        RT Subject Vowel Lang Left Right Context
## 361 647.5    S209     a   AE    f     h     f.h
## 362 617.0    S209     a   AE    f    sh    f.sh
## 363 728.5    S209     a   AE    f    sh    f.sh
## 364 629.0    S209     a   AE    f    th    f.th
## 365 688.5    S209     a   AE    f    th    f.th
## 366 602.5    S209     a   AE    s     h     s.h</code></pre>
<p>Wir möchten den linken und rechten Kontext, die hier durch einen Punkt getrennt werden, in eigenen Spalten haben (wir entfernen zu Demonstrationszwecken die Spalten <code>Left</code> und <code>Right</code>, denn die enthalten schon die gewünschte Lösung).</p>
<div class="sourceCode" id="cb438"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb438-1"><a href="daten-aufräumen-mit-tidyr.html#cb438-1" tabindex="-1"></a>vcv <span class="sc">%&lt;&gt;%</span> </span>
<span id="cb438-2"><a href="daten-aufräumen-mit-tidyr.html#cb438-2" tabindex="-1"></a>  <span class="fu">select</span>(RT<span class="sc">:</span>Lang, Context) <span class="sc">%&gt;%</span> </span>
<span id="cb438-3"><a href="daten-aufräumen-mit-tidyr.html#cb438-3" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span></code></pre></div>
<p>Um unser Ziel zu erreichen, nutzen wir die Funktion <strong><code>separate()</code></strong>, die obligatorisch folgende Argumente bekommt:</p>
<ul>
<li><code>col</code>: die Spalte, deren Inhalt aufgeteilt werden soll</li>
<li><code>into</code>: die neuen Spaltennamen</li>
<li><code>sep</code>: wie die <em>strings</em> in der gewählten Spalte getrennt werden sollen</li>
</ul>
<p>Die ersten zwei Argumente sind eigentlich klar: <code>col</code> ist die Spalte <code>Context</code>, und bei <code>into</code> geben wir die zwei gewünschten Spaltennamen <code>Left</code> und <code>Right</code> an. Für <code>sep</code> gibt es zwei Optionen: Die erste Möglichkeit ist mittels einer Zahl, die den Index angibt, ab dem getrennt werden soll: wenn z.B. die ersten zwei Buchstaben immer in die eine und der Rest in die zweite Spalte geschrieben werden soll, nutzen wir <code>sep = 2</code>. Wenn wir uns aber die unterschiedlichen Werte in <code>Context</code> anschauen, ist das hier nicht sinnvoll:</p>
<div class="sourceCode" id="cb439"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb439-1"><a href="daten-aufräumen-mit-tidyr.html#cb439-1" tabindex="-1"></a><span class="fu">levels</span>(vcv<span class="sc">$</span>Context)</span></code></pre></div>
<pre><code>## NULL</code></pre>
<p>Der linke Kontext kann aus einem oder zwei Buchstaben bestehen; außerdem ist da noch ein Punkt, der dann entweder in den linken oder rechten Kontext übernommen werden würde, wie man hier sieht:</p>
<div class="sourceCode" id="cb441"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb441-1"><a href="daten-aufräumen-mit-tidyr.html#cb441-1" tabindex="-1"></a>vcv <span class="sc">%&gt;%</span> </span>
<span id="cb441-2"><a href="daten-aufräumen-mit-tidyr.html#cb441-2" tabindex="-1"></a>  <span class="fu">separate</span>(<span class="at">col =</span> Context, </span>
<span id="cb441-3"><a href="daten-aufräumen-mit-tidyr.html#cb441-3" tabindex="-1"></a>           <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;Left&quot;</span>, <span class="st">&quot;Right&quot;</span>), </span>
<span id="cb441-4"><a href="daten-aufräumen-mit-tidyr.html#cb441-4" tabindex="-1"></a>           <span class="at">sep =</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## # A tibble: 810 × 6
##       RT Subject Vowel Lang  Left  Right
##    &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
##  1  648. S209    a     AE    f     .h   
##  2  617  S209    a     AE    f     .sh  
##  3  728. S209    a     AE    f     .sh  
##  4  629  S209    a     AE    f     .th  
##  5  688. S209    a     AE    f     .th  
##  6  602. S209    a     AE    s     .h   
##  7  632. S209    a     AE    s     .sh  
##  8  574  S209    a     AE    s     .th  
##  9  719  S209    a     AE    s     .h   
## 10  569  S209    a     AE    s     .th  
## # ℹ 800 more rows</code></pre>
<div class="sourceCode" id="cb443"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb443-1"><a href="daten-aufräumen-mit-tidyr.html#cb443-1" tabindex="-1"></a>vcv <span class="sc">%&gt;%</span> </span>
<span id="cb443-2"><a href="daten-aufräumen-mit-tidyr.html#cb443-2" tabindex="-1"></a>  <span class="fu">separate</span>(<span class="at">col =</span> Context, </span>
<span id="cb443-3"><a href="daten-aufräumen-mit-tidyr.html#cb443-3" tabindex="-1"></a>           <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;Left&quot;</span>, <span class="st">&quot;Right&quot;</span>), </span>
<span id="cb443-4"><a href="daten-aufräumen-mit-tidyr.html#cb443-4" tabindex="-1"></a>           <span class="at">sep =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## # A tibble: 810 × 6
##       RT Subject Vowel Lang  Left  Right
##    &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
##  1  648. S209    a     AE    f.    h    
##  2  617  S209    a     AE    f.    sh   
##  3  728. S209    a     AE    f.    sh   
##  4  629  S209    a     AE    f.    th   
##  5  688. S209    a     AE    f.    th   
##  6  602. S209    a     AE    s.    h    
##  7  632. S209    a     AE    s.    sh   
##  8  574  S209    a     AE    s.    th   
##  9  719  S209    a     AE    s.    h    
## 10  569  S209    a     AE    s.    th   
## # ℹ 800 more rows</code></pre>
<p>Die andere Möglichkeit ist eine <strong>regular expression</strong> (auch: regulärer Ausdruck oder RegEx). Dafür gibt man ein Muster (<em>pattern</em>) an, nach dem die Trennung in zwei Spalten erfolgen soll. Das würde für unser Beispiel gut passen, weil wir immer am Punkt trennen wollen. Der Punkt steht aber leider bei den regulären Ausdrücken für ein (und zwar egal welches) Schriftzeichen. Wenn wir den Punkt als Punkt verwenden wollen müssen wir ihn durch das Escape-Zeichen, den doppelten Backslash, schützen.</p>
<div class="sourceCode" id="cb445"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb445-1"><a href="daten-aufräumen-mit-tidyr.html#cb445-1" tabindex="-1"></a>vcv <span class="sc">%&gt;%</span> </span>
<span id="cb445-2"><a href="daten-aufräumen-mit-tidyr.html#cb445-2" tabindex="-1"></a>  <span class="fu">separate</span>(<span class="at">col =</span> Context, </span>
<span id="cb445-3"><a href="daten-aufräumen-mit-tidyr.html#cb445-3" tabindex="-1"></a>           <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;Left&quot;</span>, <span class="st">&quot;Right&quot;</span>), </span>
<span id="cb445-4"><a href="daten-aufräumen-mit-tidyr.html#cb445-4" tabindex="-1"></a>           <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">.&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 810 × 6
##       RT Subject Vowel Lang  Left  Right
##    &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
##  1  648. S209    a     AE    f     h    
##  2  617  S209    a     AE    f     sh   
##  3  728. S209    a     AE    f     sh   
##  4  629  S209    a     AE    f     th   
##  5  688. S209    a     AE    f     th   
##  6  602. S209    a     AE    s     h    
##  7  632. S209    a     AE    s     sh   
##  8  574  S209    a     AE    s     th   
##  9  719  S209    a     AE    s     h    
## 10  569  S209    a     AE    s     th   
## # ℹ 800 more rows</code></pre>
<p>So erreichen wir also das Ziel, dass jede Spalte nur eine Variable enthält!</p>
<div class="gray">
<p><strong>Weiterführende Infos: reguläre Ausdrücke</strong></p>
<p>RegExps sind ein komplexes Thema, in das wir hier nicht tiefer einsteigen werden. Wenn Sie sich einlesen wollen, empfehlen wir <a href="https://r4ds.had.co.nz/strings.html#matching-patterns-with-regular-expressions">Kapitel 14 aus <em>R for Data Science</em></a>.</p>
</div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="daten-abbilden-mit-ggplot2.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="joining-mit-dplyr.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "none",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
},
"info": false
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
